var Ae=Object.defineProperty;var Oe=(e,t,n)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var se=(e,t,n)=>(Oe(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const v of r.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&l(v)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function P(){}function $e(e){return e()}function ve(){return Object.create(null)}function ne(e){e.forEach($e)}function he(e){return typeof e=="function"}function Ee(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ae;function me(e,t){return e===t?!0:(ae||(ae=document.createElement("a")),ae.href=t,e===ae.href)}function Ie(e){return Object.keys(e).length===0}function Pe(e,...t){if(e==null){for(const l of t)l(void 0);return P}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Y(e,t,n){e.$$.on_destroy.push(Pe(t,n))}function Ue(e,t,n){return e.set(n),t}function u(e,t){e.appendChild(t)}function le(e,t,n){e.insertBefore(t,n||null)}function V(e){e.parentNode&&e.parentNode.removeChild(e)}function re(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function _(e){return document.createElement(e)}function H(e){return document.createTextNode(e)}function A(){return H(" ")}function G(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ne(e){return Array.from(e.childNodes)}function ce(e,t){t=""+t,e.data!==t&&(e.data=t)}function pe(e,t){e.value=t??""}function Z(e,t,n){for(let l=0;l<e.options.length;l+=1){const o=e.options[l];if(o.__value===t){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function fe(e){const t=e.querySelector(":checked");return t&&t.__value}function M(e,t,n){e.classList.toggle(t,!!n)}let be;function oe(e){be=e}const x=[],Le=[];let ee=[];const we=[],De=Promise.resolve();let ge=!1;function Fe(){ge||(ge=!0,De.then(Ce))}function te(e){ee.push(e)}const de=new Set;let Q=0;function Ce(){if(Q!==0)return;const e=be;do{try{for(;Q<x.length;){const t=x[Q];Q++,oe(t),Te(t.$$)}}catch(t){throw x.length=0,Q=0,t}for(oe(null),x.length=0,Q=0;Le.length;)Le.pop()();for(let t=0;t<ee.length;t+=1){const n=ee[t];de.has(n)||(de.add(n),n())}ee.length=0}while(x.length);for(;we.length;)we.pop()();ge=!1,de.clear(),oe(e)}function Te(e){if(e.fragment!==null){e.update(),ne(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(te)}}function je(e){const t=[],n=[];ee.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),ee=t}const Be=new Set;function qe(e,t){e&&e.i&&(Be.delete(e),e.i(t))}function ie(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Me(e,t,n){const{fragment:l,after_update:o}=e.$$;l&&l.m(t,n),te(()=>{const r=e.$$.on_mount.map($e).filter(he);e.$$.on_destroy?e.$$.on_destroy.push(...r):ne(r),e.$$.on_mount=[]}),o.forEach(te)}function Ge(e,t){const n=e.$$;n.fragment!==null&&(je(n.after_update),ne(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Je(e,t){e.$$.dirty[0]===-1&&(x.push(e),Fe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ke(e,t,n,l,o,r,v=null,c=[-1]){const w=be;oe(e);const a=e.$$={fragment:null,ctx:[],props:r,update:P,not_equal:o,bound:ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(w?w.$$.context:[])),callbacks:ve(),dirty:c,skip_bound:!1,root:t.target||w.$$.root};v&&v(a.root);let y=!1;if(a.ctx=n?n(e,t.props||{},(d,$,...k)=>{const E=k.length?k[0]:$;return a.ctx&&o(a.ctx[d],a.ctx[d]=E)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](E),y&&Je(e,d)),$}):[],a.update(),y=!0,ne(a.before_update),a.fragment=l?l(a.ctx):!1,t.target){if(t.hydrate){const d=Ne(t.target);a.fragment&&a.fragment.l(d),d.forEach(V)}else a.fragment&&a.fragment.c();t.intro&&qe(e.$$.fragment),Me(e,t.target,t.anchor),Ce()}oe(w)}class ze{constructor(){se(this,"$$");se(this,"$$set")}$destroy(){Ge(this,1),this.$destroy=P}$on(t,n){if(!he(n))return P;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(t){this.$$set&&!Ie(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const He="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(He);const W=[];function X(e,t=P){let n;const l=new Set;function o(c){if(Ee(e,c)&&(e=c,n)){const w=!W.length;for(const a of l)a[1](),W.push(a,e);if(w){for(let a=0;a<W.length;a+=2)W[a][0](W[a+1]);W.length=0}}}function r(c){o(c(e))}function v(c,w=P){const a=[c,w];return l.add(a),l.size===1&&(n=t(o,r)||P),c(e),()=>{l.delete(a),l.size===0&&n&&(n(),n=null)}}return{set:o,update:r,subscribe:v}}const Ve=[{label:"Juyoung"},{label:"Jessica"},{label:"Aditi"},{label:"Jane"}],Se=[{label:"Korean",value:"ko-KR"},{label:"English",value:"en-US"},{label:"Spanish",value:"es-ES"},{label:"French",value:"fr-FR"},{label:"Italian",value:"it-IT"},{label:"Hindi",value:"hi-IN"},{label:"Chinese",value:"zh-CN"},{label:"Dutch",value:"nl-NL"},{label:"Turkish",value:"tr-TR"},{label:"Swedish",value:"sv-SE"},{label:"Indonesian",value:"id-ID"},{label:"Filipino",value:"fil-PH"},{label:"Japanese",value:"ja-JP"},{label:"Ukrainian",value:"uk-UA"},{label:"Greek",value:"el-GR"},{label:"Czech",value:"cs-CZ"},{label:"Finnish",value:"fi-FI"},{label:"Romanian",value:"ro-RO"},{label:"Russian",value:"ru-RU"},{label:"Danish",value:"da-DK"},{label:"Bulgarian",value:"bg-BG"},{label:"Malay",value:"ms-MY"},{label:"Slovak",value:"sk-SK"},{label:"Croatian",value:"hr-HR"},{label:"Classic Arabic",value:"ar-SA"},{label:"Tamil",value:"ta-IN"},{label:"Polish",value:"pl-PL"},{label:"German",value:"de-DE"},{label:"Portuguese",value:"pt-BR"}];function ye(e,t,n){const l=e.slice();return l[27]=t[n][0],l[28]=t[n][1],l[29]=t,l[30]=n,l}function Ye(e,t,n){const l=e.slice();return l[31]=t[n],l}function Ze(e,t,n){const l=e.slice();return l[34]=t[n],l}function Qe(e,t,n){const l=e.slice();return l[34]=t[n],l}function We(e){let t;return{c(){t=_("option"),t.textContent=`${e[34].label}`,t.__value=e[34].value,pe(t,t.__value)},m(n,l){le(n,t,l)},p:P,d(n){n&&V(t)}}}function Xe(e){let t;return{c(){t=_("option"),t.textContent=`${e[34].label}`,t.__value=e[34].value,pe(t,t.__value)},m(n,l){le(n,t,l)},p:P,d(n){n&&V(t)}}}function xe(e){let t;return{c(){t=_("option"),t.textContent=`${e[31].label}`,t.__value=e[31].label,pe(t,t.__value)},m(n,l){le(n,t,l)},p:P,d(n){n&&V(t)}}}function ke(e){let t,n,l,o,r,v,c,w,a,y,d,$,k,E,L,R,T,O,m,j,I,B,S,D,F,q,J,U=ie(Se),b=[];for(let f=0;f<U.length;f+=1)b[f]=We(Qe(e,U,f));function i(){e[21].call(c,e[29],e[30])}let s=ie(Se),h=[];for(let f=0;f<s.length;f+=1)h[f]=Xe(Ze(e,s,f));function p(){e[22].call(L,e[29],e[30])}let K=ie(Ve),z=[];for(let f=0;f<K.length;f+=1)z[f]=xe(Ye(e,K,f));function _e(){e[23].call(S,e[29],e[30])}return{c(){t=_("div"),n=_("div"),l=_("label"),o=H("Input Language:"),v=A(),c=_("select");for(let f=0;f<b.length;f+=1)b[f].c();a=A(),y=_("div"),d=_("label"),$=H("Output Language:"),E=A(),L=_("select");for(let f=0;f<h.length;f+=1)h[f].c();T=A(),O=_("div"),m=_("label"),j=H("Voice:"),B=A(),S=_("select");for(let f=0;f<z.length;f+=1)z[f].c();F=A(),g(l,"for",r=`${e[27]}-inputLanguage`),g(l,"class","svelte-10cfin2"),g(c,"id",w=`${e[27]}-inputLanguage`),g(c,"class","svelte-10cfin2"),e[28].inputLanguage===void 0&&te(i),g(d,"for",k=`${e[27]}-outputLanguage`),g(d,"class","svelte-10cfin2"),g(L,"id",R=`${e[27]}-outputLanguage`),g(L,"class","svelte-10cfin2"),e[28].outputLanguage===void 0&&te(p),g(m,"for",I=`${e[27]}-voice`),g(m,"class","svelte-10cfin2"),g(S,"id",D=`${e[27]}-voice`),g(S,"class","svelte-10cfin2"),e[28].voice===void 0&&te(_e),g(t,"class","column svelte-10cfin2")},m(f,N){le(f,t,N),u(t,n),u(n,l),u(l,o),u(n,v),u(n,c);for(let C=0;C<b.length;C+=1)b[C]&&b[C].m(c,null);Z(c,e[28].inputLanguage,!0),u(t,a),u(t,y),u(y,d),u(d,$),u(y,E),u(y,L);for(let C=0;C<h.length;C+=1)h[C]&&h[C].m(L,null);Z(L,e[28].outputLanguage,!0),u(t,T),u(t,O),u(O,m),u(m,j),u(O,B),u(O,S);for(let C=0;C<z.length;C+=1)z[C]&&z[C].m(S,null);Z(S,e[28].voice,!0),u(t,F),q||(J=[G(c,"change",i),G(L,"change",p),G(S,"change",_e)],q=!0)},p(f,N){e=f,N[0]&4&&r!==(r=`${e[27]}-inputLanguage`)&&g(l,"for",r),N[0]&4&&w!==(w=`${e[27]}-inputLanguage`)&&g(c,"id",w),N[0]&4&&Z(c,e[28].inputLanguage),N[0]&4&&k!==(k=`${e[27]}-outputLanguage`)&&g(d,"for",k),N[0]&4&&R!==(R=`${e[27]}-outputLanguage`)&&g(L,"id",R),N[0]&4&&Z(L,e[28].outputLanguage),N[0]&4&&I!==(I=`${e[27]}-voice`)&&g(m,"for",I),N[0]&4&&D!==(D=`${e[27]}-voice`)&&g(S,"id",D),N[0]&4&&Z(S,e[28].voice)},d(f){f&&V(t),re(b,f),re(h,f),re(z,f),q=!1,ne(J)}}}function Re(e){let t,n,l,o,r;return{c(){t=_("div"),n=_("audio"),me(n.src,l=e[8])||g(n,"src",l),n.controls=!0,g(t,"class","audio-player svelte-10cfin2")},m(v,c){le(v,t,c),u(t,n),o||(r=G(n,"loadedmetadata",nt),o=!0)},p(v,c){c[0]&256&&!me(n.src,l=v[8])&&g(n,"src",l)},d(v){v&&V(t),o=!1,r()}}}function et(e){let t,n,l,o,r,v,c,w,a,y,d,$=e[1]?"Stop Recording":"Start Recording",k,E,L,R=e[5]?`Recording... ${e[6]} seconds left`:"Please begin recording",T,O,m,j=e[7]||e[4]?"Loading...":(e[5],"Submit"),I,B,S,D,F,q,J,U=ie(Object.entries(e[2])),b=[];for(let s=0;s<U.length;s+=1)b[s]=ke(ye(e,U,s));let i=e[8]&&Re(e);return{c(){t=_("div"),n=_("h1"),n.textContent="Audio Translation App",l=A(),o=_("div"),r=_("button"),r.textContent="Doctor",v=A(),c=_("button"),c.textContent="Patient",w=A(),a=_("div");for(let s=0;s<b.length;s+=1)b[s].c();y=A(),d=_("button"),k=H($),E=A(),L=_("p"),T=H(R),O=A(),m=_("button"),I=H(j),S=A(),i&&i.c(),D=A(),F=_("button"),F.textContent="Start New Conversation",g(n,"class","svelte-10cfin2"),g(r,"class","svelte-10cfin2"),M(r,"active",e[3]==="person1"),g(c,"class","svelte-10cfin2"),M(c,"active",e[3]==="person2"),g(o,"class","mode-selector svelte-10cfin2"),g(a,"class","settings svelte-10cfin2"),d.disabled=e[4],g(d,"class","svelte-10cfin2"),M(d,"record-button",!0),M(d,"red",e[1]),g(L,"class","svelte-10cfin2"),m.disabled=B=!e[0]||e[4]||e[1],g(m,"class","svelte-10cfin2"),M(m,"loading",e[7]||e[4]),g(F,"class","svelte-10cfin2"),g(t,"class","container svelte-10cfin2")},m(s,h){le(s,t,h),u(t,n),u(t,l),u(t,o),u(o,r),u(o,v),u(o,c),u(t,w),u(t,a);for(let p=0;p<b.length;p+=1)b[p]&&b[p].m(a,null);u(t,y),u(t,d),u(d,k),u(t,E),u(t,L),u(L,T),u(t,O),u(t,m),u(m,I),u(t,S),i&&i.m(t,null),u(t,D),u(t,F),q||(J=[G(r,"click",e[19]),G(c,"click",e[20]),G(d,"click",function(){he(e[1]?e[17]:e[16])&&(e[1]?e[17]:e[16]).apply(this,arguments)}),G(m,"click",e[18]),G(F,"click",lt)],q=!0)},p(s,h){if(e=s,h[0]&8&&M(r,"active",e[3]==="person1"),h[0]&8&&M(c,"active",e[3]==="person2"),h[0]&4){U=ie(Object.entries(e[2]));let p;for(p=0;p<U.length;p+=1){const K=ye(e,U,p);b[p]?b[p].p(K,h):(b[p]=ke(K),b[p].c(),b[p].m(a,null))}for(;p<b.length;p+=1)b[p].d(1);b.length=U.length}h[0]&2&&$!==($=e[1]?"Stop Recording":"Start Recording")&&ce(k,$),h[0]&16&&(d.disabled=e[4]),h[0]&2&&M(d,"red",e[1]),h[0]&96&&R!==(R=e[5]?`Recording... ${e[6]} seconds left`:"Please begin recording")&&ce(T,R),h[0]&176&&j!==(j=e[7]||e[4]?"Loading...":(e[5],"Submit"))&&ce(I,j),h[0]&19&&B!==(B=!e[0]||e[4]||e[1])&&(m.disabled=B),h[0]&144&&M(m,"loading",e[7]||e[4]),e[8]?i?i.p(e,h):(i=Re(e),i.c(),i.m(t,D)):i&&(i.d(1),i=null)},i:P,o:P,d(s){s&&V(t),re(b,s),i&&i.d(),q=!1,ne(J)}}}let tt="https://api.thevoicetranslator.com/process-audio",ue=30;function nt(e){e.target.getAttribute("data-playable")==="true"&&e.target.play().catch(t=>{console.error("Error playing audio:",t.message)})}function lt(){fetch("https://api.thevoicetranslator.com/start-new-conversation",{method:"GET"}).then(e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()}).then(e=>{console.log(e)}).catch(e=>{console.error("Error:",e),alert("Failed to start new conversation.")})}function ot(e,t,n){let l,o,r,v,c,w,a,y=X(!1);Y(e,y,i=>n(4,o=i));let d=!1,$,k=X("person1");Y(e,k,i=>n(3,l=i));let E=X("");Y(e,E,i=>n(8,w=i));let L=X(!1);Y(e,L,i=>n(7,c=i));let R=X(ue);Y(e,R,i=>n(6,v=i));let T,O=X(!1);Y(e,O,i=>n(5,r=i));let m={person1:{inputLanguage:"en-US",outputLanguage:"es",voice:""},person2:{inputLanguage:"en-US",outputLanguage:"es",voice:""}};function j(){n(0,a=void 0),E.set(""),O.set(!1),d&&S()}function I(i){!d&&l!==i&&(j(),Ue(k,l=i,l))}async function B(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error("Recording not supported");return}const i=await navigator.mediaDevices.getUserMedia({audio:!0}),s=new MediaRecorder(i);$=s,s.start();let h=[];s.addEventListener("dataavailable",p=>{h.push(p.data)}),s.addEventListener("stop",()=>{const p=new Blob(h);n(0,a=new File([p],"recordedAudio.wav",{type:"audio/wav"})),E.set(URL.createObjectURL(p))}),n(1,d=!0),O.set(!0),R.set(ue),T=setInterval(()=>{R.update(p=>p>0?p-1:0)},1e3),setTimeout(()=>{d&&S()},ue*1e3)}function S(){$&&($.stop(),clearInterval(T),n(1,d=!1),R.set(ue))}async function D(){y.set(!0),L.set(!0);let i=l==="person1"?m.person1:m.person2;const s=new FormData;s.append("audio",a),s.append("input_lang",i.inputLanguage),s.append("output_lang",i.outputLanguage.substring(0,2)),s.append("voice",i.voice),s.append("mode",l);try{const h=await fetch(tt,{method:"POST",body:s});if(h.ok){const p=await h.blob(),K=URL.createObjectURL(p);E.set(K),document.querySelector(".audio-player audio").setAttribute("data-playable","true")}else console.error("Server error:",h)}catch(h){console.error("Failed to submit audio:",h)}y.set(!1),L.set(!1)}const F=()=>I("person1"),q=()=>I("person2");function J(i,s){i[s][1].inputLanguage=fe(this),n(2,m)}function U(i,s){i[s][1].outputLanguage=fe(this),n(2,m)}function b(i,s){i[s][1].voice=fe(this),n(2,m)}return[a,d,m,l,o,r,v,c,w,y,k,E,L,R,O,I,B,S,D,F,q,J,U,b]}class it extends ze{constructor(t){super(),Ke(this,t,ot,et,Ee,{},null,[-1,-1])}}new it({target:document.getElementById("app")});
