var De=Object.defineProperty;var Fe=(e,t,n)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var re=(e,t,n)=>(Fe(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const b of a.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&l(b)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function D(){}function Ae(e){return e()}function we(){return Object.create(null)}function te(e){e.forEach(Ae)}function he(e){return typeof e=="function"}function Pe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ue;function Se(e,t){return e===t?!0:(ue||(ue=document.createElement("a")),ue.href=t,e===ue.href)}function je(e){return Object.keys(e).length===0}function Be(e,...t){if(e==null){for(const l of t)l(void 0);return D}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ce(e,t,n){e.$$.on_destroy.push(Be(t,n))}function ke(e){return e??""}function Te(e,t,n){return e.set(n),t}function u(e,t){e.appendChild(t)}function ne(e,t,n){e.insertBefore(t,n||null)}function Y(e){e.parentNode&&e.parentNode.removeChild(e)}function ae(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function M(e){return document.createTextNode(e)}function C(){return M(" ")}function V(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function c(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Me(e){return Array.from(e.childNodes)}function se(e,t){t=""+t,e.data!==t&&(e.data=t)}function _e(e,t){e.value=t??""}function Z(e,t,n){for(let l=0;l<e.options.length;l+=1){const o=e.options[l];if(o.__value===t){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function fe(e){const t=e.querySelector(":checked");return t&&t.__value}function H(e,t,n){e.classList.toggle(t,!!n)}let be;function le(e){be=e}const X=[],Re=[];let x=[];const Ee=[],qe=Promise.resolve();let ge=!1;function Je(){ge||(ge=!0,qe.then(Ne))}function ee(e){x.push(e)}const de=new Set;let Q=0;function Ne(){if(Q!==0)return;const e=be;do{try{for(;Q<X.length;){const t=X[Q];Q++,le(t),Ke(t.$$)}}catch(t){throw X.length=0,Q=0,t}for(le(null),X.length=0,Q=0;Re.length;)Re.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];de.has(n)||(de.add(n),n())}x.length=0}while(X.length);for(;Ee.length;)Ee.pop()();ge=!1,de.clear(),le(e)}function Ke(e){if(e.fragment!==null){e.update(),te(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ee)}}function ze(e){const t=[],n=[];x.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),x=t}const Ge=new Set;function He(e,t){e&&e.i&&(Ge.delete(e),e.i(t))}function oe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ve(e,t,n){const{fragment:l,after_update:o}=e.$$;l&&l.m(t,n),ee(()=>{const a=e.$$.on_mount.map(Ae).filter(he);e.$$.on_destroy?e.$$.on_destroy.push(...a):te(a),e.$$.on_mount=[]}),o.forEach(ee)}function Ye(e,t){const n=e.$$;n.fragment!==null&&(ze(n.after_update),te(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ze(e,t){e.$$.dirty[0]===-1&&(X.push(e),Je(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Qe(e,t,n,l,o,a,b=null,f=[-1]){const v=be;le(e);const i=e.$$={fragment:null,ctx:[],props:a,update:D,not_equal:o,bound:we(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(v?v.$$.context:[])),callbacks:we(),dirty:f,skip_bound:!1,root:t.target||v.$$.root};b&&b(i.root);let U=!1;if(i.ctx=n?n(e,t.props||{},(s,w,...A)=>{const S=A.length?A[0]:w;return i.ctx&&o(i.ctx[s],i.ctx[s]=S)&&(!i.skip_bound&&i.bound[s]&&i.bound[s](S),U&&Ze(e,s)),w}):[],i.update(),U=!0,te(i.before_update),i.fragment=l?l(i.ctx):!1,t.target){if(t.hydrate){const s=Me(t.target);i.fragment&&i.fragment.l(s),s.forEach(Y)}else i.fragment&&i.fragment.c();t.intro&&He(e.$$.fragment),Ve(e,t.target,t.anchor),Ne()}le(v)}class We{constructor(){re(this,"$$");re(this,"$$set")}$destroy(){Ye(this,1),this.$destroy=D}$on(t,n){if(!he(n))return D;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(t){this.$$set&&!je(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Xe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Xe);const W=[];function pe(e,t=D){let n;const l=new Set;function o(f){if(Pe(e,f)&&(e=f,n)){const v=!W.length;for(const i of l)i[1](),W.push(i,e);if(v){for(let i=0;i<W.length;i+=2)W[i][0](W[i+1]);W.length=0}}}function a(f){o(f(e))}function b(f,v=D){const i=[f,v];return l.add(i),l.size===1&&(n=t(o,a)||D),f(e),()=>{l.delete(i),l.size===0&&n&&(n(),n=null)}}return{set:o,update:a,subscribe:b}}const xe=[{label:"Juyoung"},{label:"Jessica"},{label:"Aditi"},{label:"Jane"}],Oe=[{label:"Korean",value:"ko-KR"},{label:"English",value:"en-US"},{label:"Spanish",value:"es-ES"},{label:"French",value:"fr-FR"},{label:"Italian",value:"it-IT"},{label:"Hindi",value:"hi-IN"},{label:"Chinese",value:"zh-CN"},{label:"Dutch",value:"nl-NL"},{label:"Turkish",value:"tr-TR"},{label:"Swedish",value:"sv-SE"},{label:"Indonesian",value:"id-ID"},{label:"Filipino",value:"fil-PH"},{label:"Japanese",value:"ja-JP"},{label:"Ukrainian",value:"uk-UA"},{label:"Greek",value:"el-GR"},{label:"Czech",value:"cs-CZ"},{label:"Finnish",value:"fi-FI"},{label:"Romanian",value:"ro-RO"},{label:"Russian",value:"ru-RU"},{label:"Danish",value:"da-DK"},{label:"Bulgarian",value:"bg-BG"},{label:"Malay",value:"ms-MY"},{label:"Slovak",value:"sk-SK"},{label:"Croatian",value:"hr-HR"},{label:"Classic Arabic",value:"ar-SA"},{label:"Tamil",value:"ta-IN"},{label:"Polish",value:"pl-PL"},{label:"German",value:"de-DE"},{label:"Portuguese",value:"pt-BR"}];function Ce(e,t,n){const l=e.slice();return l[22]=t[n][0],l[23]=t[n][1],l[24]=t,l[25]=n,l}function et(e,t,n){const l=e.slice();return l[26]=t[n],l}function tt(e,t,n){const l=e.slice();return l[29]=t[n],l}function nt(e,t,n){const l=e.slice();return l[29]=t[n],l}function lt(e){let t;return{c(){t=p("option"),t.textContent=`${e[29].label}`,t.__value=e[29].value,_e(t,t.__value)},m(n,l){ne(n,t,l)},p:D,d(n){n&&Y(t)}}}function ot(e){let t;return{c(){t=p("option"),t.textContent=`${e[29].label}`,t.__value=e[29].value,_e(t,t.__value)},m(n,l){ne(n,t,l)},p:D,d(n){n&&Y(t)}}}function ut(e){let t;return{c(){t=p("option"),t.textContent=`${e[26].label}`,t.__value=e[26].label,_e(t,t.__value)},m(n,l){ne(n,t,l)},p:D,d(n){n&&Y(t)}}}function Ie(e){let t,n,l=e[22]+"",o,a,b,f,v,i,U,s,w,A,S,E,q,j,B,R,J,P,N,F,K,d,g,h,_,m,L,$,k,y=oe(Oe),T=[];for(let r=0;r<y.length;r+=1)T[r]=lt(nt(e,y,r));function ve(){e[15].call(s,e[24],e[25])}let me=oe(Oe),z=[];for(let r=0;r<me.length;r+=1)z[r]=ot(tt(e,me,r));function ye(){e[16].call(R,e[24],e[25])}let Le=oe(xe),G=[];for(let r=0;r<Le.length;r+=1)G[r]=ut(et(e,Le,r));function $e(){e[17].call(h,e[24],e[25])}return{c(){t=p("div"),n=p("h2"),o=M(l),a=C(),b=p("div"),f=p("label"),v=M("Input Language:"),U=C(),s=p("select");for(let r=0;r<T.length;r+=1)T[r].c();A=C(),S=p("div"),E=p("label"),q=M("Output Language:"),B=C(),R=p("select");for(let r=0;r<z.length;r+=1)z[r].c();P=C(),N=p("div"),F=p("label"),K=M("Voice:"),g=C(),h=p("select");for(let r=0;r<G.length;r+=1)G[r].c();m=C(),c(f,"for",i=`${e[22]}-inputLanguage`),c(s,"id",w=`${e[22]}-inputLanguage`),c(s,"class","svelte-p7yfcd"),e[23].inputLanguage===void 0&&ee(ve),c(E,"for",j=`${e[22]}-outputLanguage`),c(R,"id",J=`${e[22]}-outputLanguage`),c(R,"class","svelte-p7yfcd"),e[23].outputLanguage===void 0&&ee(ye),c(F,"for",d=`${e[22]}-voice`),c(h,"id",_=`${e[22]}-voice`),c(h,"class","svelte-p7yfcd"),e[23].voice===void 0&&ee($e),c(t,"class",L=ke(`column ${e[3]===e[22]?"active":""}`)+" svelte-p7yfcd")},m(r,I){ne(r,t,I),u(t,n),u(n,o),u(t,a),u(t,b),u(b,f),u(f,v),u(b,U),u(b,s);for(let O=0;O<T.length;O+=1)T[O]&&T[O].m(s,null);Z(s,e[23].inputLanguage,!0),u(t,A),u(t,S),u(S,E),u(E,q),u(S,B),u(S,R);for(let O=0;O<z.length;O+=1)z[O]&&z[O].m(R,null);Z(R,e[23].outputLanguage,!0),u(t,P),u(t,N),u(N,F),u(F,K),u(N,g),u(N,h);for(let O=0;O<G.length;O+=1)G[O]&&G[O].m(h,null);Z(h,e[23].voice,!0),u(t,m),$||(k=[V(s,"change",ve),V(R,"change",ye),V(h,"change",$e)],$=!0)},p(r,I){e=r,I[0]&4&&l!==(l=e[22]+"")&&se(o,l),I[0]&4&&i!==(i=`${e[22]}-inputLanguage`)&&c(f,"for",i),I[0]&4&&w!==(w=`${e[22]}-inputLanguage`)&&c(s,"id",w),I[0]&4&&Z(s,e[23].inputLanguage),I[0]&4&&j!==(j=`${e[22]}-outputLanguage`)&&c(E,"for",j),I[0]&4&&J!==(J=`${e[22]}-outputLanguage`)&&c(R,"id",J),I[0]&4&&Z(R,e[23].outputLanguage),I[0]&4&&d!==(d=`${e[22]}-voice`)&&c(F,"for",d),I[0]&4&&_!==(_=`${e[22]}-voice`)&&c(h,"id",_),I[0]&4&&Z(h,e[23].voice),I[0]&12&&L!==(L=ke(`column ${e[3]===e[22]?"active":""}`)+" svelte-p7yfcd")&&c(t,"class",L)},d(r){r&&Y(t),ae(T,r),ae(z,r),ae(G,r),$=!1,te(k)}}}function Ue(e){let t,n,l;return{c(){t=p("div"),n=p("audio"),Se(n.src,l=e[5])||c(n,"src",l),n.controls=!0,c(t,"class","audio-player svelte-p7yfcd")},m(o,a){ne(o,t,a),u(t,n)},p(o,a){a[0]&32&&!Se(n.src,l=o[5])&&c(n,"src",l)},d(o){o&&Y(t)}}}function it(e){let t,n,l,o,a,b,f,v,i,U,s,w=e[1]?"Stop Recording":"Start Recording",A,S,E,q,j,B,R,J,P,N=e[0]?"Submitting...":"Submit",F,K,d,g,h,_=oe(Object.entries(e[2])),m=[];for(let $=0;$<_.length;$+=1)m[$]=Ie(Ce(e,_,$));let L=e[5]&&Ue(e);return{c(){t=p("div"),n=p("h1"),n.textContent="Audio Translation App",l=C(),o=p("div"),a=p("button"),a.textContent="Person 1",b=C(),f=p("button"),f.textContent="Person 2",v=C(),i=p("div");for(let $=0;$<m.length;$+=1)m[$].c();U=C(),s=p("button"),A=M(w),S=C(),E=p("p"),q=M("Recording... "),j=p("span"),B=M(e[4]),R=M(" seconds left"),J=C(),P=p("button"),F=M(N),d=C(),L&&L.c(),c(n,"class","svelte-p7yfcd"),c(a,"class","svelte-p7yfcd"),H(a,"active",e[3]==="person1"),c(f,"class","svelte-p7yfcd"),H(f,"active",e[3]==="person2"),c(o,"class","mode-selector svelte-p7yfcd"),c(i,"class","settings svelte-p7yfcd"),s.disabled=e[0],c(s,"class","svelte-p7yfcd"),H(s,"record-button",!0),H(s,"red",e[1]),c(E,"class","svelte-p7yfcd"),P.disabled=K=e[0]||e[1],c(P,"class","svelte-p7yfcd"),c(t,"class","container svelte-p7yfcd")},m($,k){ne($,t,k),u(t,n),u(t,l),u(t,o),u(o,a),u(o,b),u(o,f),u(t,v),u(t,i);for(let y=0;y<m.length;y+=1)m[y]&&m[y].m(i,null);u(t,U),u(t,s),u(s,A),u(t,S),u(t,E),u(E,q),u(E,j),u(j,B),u(E,R),u(t,J),u(t,P),u(P,F),u(t,d),L&&L.m(t,null),g||(h=[V(a,"click",e[13]),V(f,"click",e[14]),V(s,"click",function(){he(e[1]?e[11]:e[10])&&(e[1]?e[11]:e[10]).apply(this,arguments)}),V(P,"click",e[12])],g=!0)},p($,k){if(e=$,k[0]&8&&H(a,"active",e[3]==="person1"),k[0]&8&&H(f,"active",e[3]==="person2"),k[0]&12){_=oe(Object.entries(e[2]));let y;for(y=0;y<_.length;y+=1){const T=Ce(e,_,y);m[y]?m[y].p(T,k):(m[y]=Ie(T),m[y].c(),m[y].m(i,null))}for(;y<m.length;y+=1)m[y].d(1);m.length=_.length}k[0]&2&&w!==(w=e[1]?"Stop Recording":"Start Recording")&&se(A,w),k[0]&1&&(s.disabled=e[0]),k[0]&2&&H(s,"red",e[1]),k[0]&16&&se(B,e[4]),k[0]&1&&N!==(N=e[0]?"Submitting...":"Submit")&&se(F,N),k[0]&3&&K!==(K=e[0]||e[1])&&(P.disabled=K),e[5]?L?L.p(e,k):(L=Ue(e),L.c(),L.m(t,null)):L&&(L.d(1),L=null)},i:D,o:D,d($){$&&Y(t),ae(m,$),L&&L.d(),g=!1,te(h)}}}let at="https://api.thevoicetranslator.com/process-audio",ie=30;function st(e,t,n){let l,o,a,b,f=!1,v=!1,i,U=pe("person1");ce(e,U,d=>n(3,l=d));let s=pe("");ce(e,s,d=>n(5,a=d));let w=pe(ie);ce(e,w,d=>n(4,o=d));let A,S={person1:{inputLanguage:"en-US",outputLanguage:"es",voice:""},person2:{inputLanguage:"en-US",outputLanguage:"es",voice:""}};function E(){b=void 0,s.set(""),v&&B()}function q(d){!v&&l!==d&&(E(),Te(U,l=d,l))}async function j(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error("Recording not supported");return}const d=await navigator.mediaDevices.getUserMedia({audio:!0}),g=new MediaRecorder(d);i=g,g.start();let h=[];g.addEventListener("dataavailable",_=>{h.push(_.data)}),g.addEventListener("stop",()=>{const _=new Blob(h);b=new File([_],"recordedAudio.wav",{type:"audio/wav"}),s.set(URL.createObjectURL(_))}),n(1,v=!0),w.set(ie),A=setInterval(()=>{w.update(_=>_>0?_-1:0)},1e3),setTimeout(()=>{v&&B()},ie*1e3)}function B(){i&&(i.stop(),clearInterval(A),n(1,v=!1),w.set(ie))}async function R(){n(0,f=!0);let d=l==="person1"?S.person1:S.person2;const g=new FormData;g.append("audio",b),g.append("input_lang",d.inputLanguage),g.append("output_lang",d.outputLanguage.substring(0,2)),g.append("voice",d.voice);for(let[h,_]of g.entries())console.log(h,_);try{const h=await fetch(at,{method:"POST",body:g});if(h.ok){const _=await h.blob(),m=URL.createObjectURL(_);s.set(m)}else console.error("Server error:",h);n(0,f=!1)}catch(h){console.error("Failed to submit audio:",h),n(0,f=!1)}}const J=()=>q("person1"),P=()=>q("person2");function N(d,g){d[g][1].inputLanguage=fe(this),n(2,S)}function F(d,g){d[g][1].outputLanguage=fe(this),n(2,S)}function K(d,g){d[g][1].voice=fe(this),n(2,S)}return[f,v,S,l,o,a,U,s,w,q,j,B,R,J,P,N,F,K]}class rt extends We{constructor(t){super(),Qe(this,t,st,it,Pe,{},null,[-1,-1])}}new rt({target:document.getElementById("app")});
