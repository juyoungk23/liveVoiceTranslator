var Me=Object.defineProperty;var Ge=(e,t,l)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var pe=(e,t,l)=>(Ge(e,typeof t!="symbol"?t+"":t,l),l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function l(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=l(o);fetch(o.href,s)}})();function C(){}function De(e){return e()}function Re(){return Object.create(null)}function re(e){e.forEach(De)}function Te(e){return typeof e=="function"}function Be(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ae;function Se(e,t){return e===t?!0:(ae||(ae=document.createElement("a")),ae.href=t,e===ae.href)}function Je(e){return Object.keys(e).length===0}function Ke(e,...t){if(e==null){for(const n of t)n(void 0);return C}const l=e.subscribe(...t);return l.unsubscribe?()=>l.unsubscribe():l}function ze(e,t,l){e.$$.on_destroy.push(Ke(t,l))}function fe(e){return e??""}function c(e,t){e.appendChild(t)}function J(e,t,l){e.insertBefore(t,l||null)}function q(e){e.parentNode&&e.parentNode.removeChild(e)}function be(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function f(e){return document.createElement(e)}function B(e){return document.createTextNode(e)}function w(){return B(" ")}function T(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function p(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function He(e){return Array.from(e.childNodes)}function qe(e,t){t=""+t,e.data!==t&&(e.data=t)}function ve(e,t){e.value=t??""}function Z(e,t,l){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t){o.selected=!0;return}}(!l||t!==void 0)&&(e.selectedIndex=-1)}function _e(e){const t=e.querySelector(":checked");return t&&t.__value}let ke;function oe(e){ke=e}const x=[],Le=[];let ee=[];const Ee=[],Ve=Promise.resolve();let me=!1;function Ye(){me||(me=!0,Ve.then(je))}function te(e){ee.push(e)}const ge=new Set;let Q=0;function je(){if(Q!==0)return;const e=ke;do{try{for(;Q<x.length;){const t=x[Q];Q++,oe(t),Ze(t.$$)}}catch(t){throw x.length=0,Q=0,t}for(oe(null),x.length=0,Q=0;Le.length;)Le.pop()();for(let t=0;t<ee.length;t+=1){const l=ee[t];ge.has(l)||(ge.add(l),l())}ee.length=0}while(x.length);for(;Ee.length;)Ee.pop()();me=!1,ge.clear(),oe(e)}function Ze(e){if(e.fragment!==null){e.update(),re(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(te)}}function Qe(e){const t=[],l=[];ee.forEach(n=>e.indexOf(n)===-1?t.push(n):l.push(n)),l.forEach(n=>n()),ee=t}const We=new Set;function Xe(e,t){e&&e.i&&(We.delete(e),e.i(t))}function W(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function xe(e,t,l){const{fragment:n,after_update:o}=e.$$;n&&n.m(t,l),te(()=>{const s=e.$$.on_mount.map(De).filter(Te);e.$$.on_destroy?e.$$.on_destroy.push(...s):re(s),e.$$.on_mount=[]}),o.forEach(te)}function et(e,t){const l=e.$$;l.fragment!==null&&(Qe(l.after_update),re(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function tt(e,t){e.$$.dirty[0]===-1&&(x.push(e),Ye(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function lt(e,t,l,n,o,s,d=null,a=[-1]){const h=ke;oe(e);const u=e.$$={fragment:null,ctx:[],props:s,update:C,not_equal:o,bound:Re(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(h?h.$$.context:[])),callbacks:Re(),dirty:a,skip_bound:!1,root:t.target||h.$$.root};d&&d(u.root);let m=!1;if(u.ctx=l?l(e,t.props||{},(g,P,...$)=>{const I=$.length?$[0]:P;return u.ctx&&o(u.ctx[g],u.ctx[g]=I)&&(!u.skip_bound&&u.bound[g]&&u.bound[g](I),m&&tt(e,g)),P}):[],u.update(),m=!0,re(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const g=He(t.target);u.fragment&&u.fragment.l(g),g.forEach(q)}else u.fragment&&u.fragment.c();t.intro&&Xe(e.$$.fragment),xe(e,t.target,t.anchor),je()}oe(h)}class nt{constructor(){pe(this,"$$");pe(this,"$$set")}$destroy(){et(this,1),this.$destroy=C}$on(t,l){if(!Te(l))return C;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const o=n.indexOf(l);o!==-1&&n.splice(o,1)}}$set(t){this.$$set&&!Je(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ot="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ot);const X=[];function rt(e,t=C){let l;const n=new Set;function o(a){if(Be(e,a)&&(e=a,l)){const h=!X.length;for(const u of n)u[1](),X.push(u,e);if(h){for(let u=0;u<X.length;u+=2)X[u][0](X[u+1]);X.length=0}}}function s(a){o(a(e))}function d(a,h=C){const u=[a,h];return n.add(u),n.size===1&&(l=t(o,s)||C),a(e),()=>{n.delete(u),n.size===0&&l&&(l(),l=null)}}return{set:o,update:s,subscribe:d}}function Ae(e,t,l){const n=e.slice();return n[7]=t[l],n}function Ce(e,t,l){const n=e.slice();return n[26]=t[l],n}function Oe(e,t,l){const n=e.slice();return n[26]=t[l],n}function Ue(e){let t,l,n,o,s,d,a,h;return{c(){t=f("div"),l=f("label"),l.textContent="Upload Audio:",n=w(),o=f("input"),s=w(),d=f("p"),d.textContent="File length max 30 seconds...",p(l,"for","audioFile"),p(o,"type","file"),p(o,"accept","audio/*"),p(o,"class","svelte-crumt5")},m(u,m){J(u,t,m),c(t,l),c(t,n),c(t,o),c(t,s),c(t,d),a||(h=T(o,"change",e[16]),a=!0)},p:C,d(u){u&&q(t),a=!1,h()}}}function $e(e){let t,l,n=e[4]?"Stop Recording":"Start Recording",o,s,d,a,h;return{c(){t=f("div"),l=f("button"),o=B(n),s=w(),d=f("p"),d.textContent="Can record up to 15 seconds...",p(l,"class","svelte-crumt5")},m(u,m){J(u,t,m),c(t,l),c(l,o),c(t,s),c(t,d),a||(h=T(l,"click",e[17]),a=!0)},p(u,m){m&16&&n!==(n=u[4]?"Stop Recording":"Start Recording")&&qe(o,n)},d(u){u&&q(t),a=!1,h()}}}function Ie(e){let t,l=e[26].label+"",n;return{c(){t=f("option"),n=B(l),t.__value=e[26].value,ve(t,t.__value)},m(o,s){J(o,t,s),c(t,n)},p:C,d(o){o&&q(t)}}}function Ne(e){let t,l=e[26].label+"",n;return{c(){t=f("option"),n=B(l),t.__value=e[26].value,ve(t,t.__value)},m(o,s){J(o,t,s),c(t,n)},p:C,d(o){o&&q(t)}}}function Pe(e){let t,l=e[7].label+"",n;return{c(){t=f("option"),n=B(l),t.__value=e[7].label,ve(t,t.__value)},m(o,s){J(o,t,s),c(t,n)},p:C,d(o){o&&q(t)}}}function Fe(e){let t,l;return{c(){t=f("audio"),Se(t.src,l=e[6])||p(t,"src",l),t.controls=!0},m(n,o){J(n,t,o)},p(n,o){o&64&&!Se(t.src,l=n[6])&&p(t,"src",l)},d(n){n&&q(t)}}}function it(e){let t,l,n,o,s,d,a,h,u,m,g,P,$,I,N,j,le,A,ie,M,K,ue,U,se,G,z,R,b,F,O,ce=e[0]?"Generating...":"Submit",de,ye,ne,he,we,S=e[5]==="upload"&&Ue(e),L=e[5]==="record"&&$e(e),H=W(e[10]),v=[];for(let r=0;r<H.length;r+=1)v[r]=Ie(Oe(e,H,r));let V=W(e[10]),k=[];for(let r=0;r<V.length;r+=1)k[r]=Ne(Ce(e,V,r));let Y=W(e[9]),y=[];for(let r=0;r<Y.length;r+=1)y[r]=Pe(Ae(e,Y,r));let E=e[6]&&Fe(e);return{c(){t=f("div"),l=f("h1"),l.textContent="Audio Translation App",n=w(),o=f("div"),s=f("button"),d=B("Record Audio"),h=w(),u=f("button"),m=B("Upload Audio"),P=w(),S&&S.c(),$=w(),L&&L.c(),I=w(),N=f("div"),j=f("label"),j.textContent="Input Language:",le=w(),A=f("select");for(let r=0;r<v.length;r+=1)v[r].c();ie=w(),M=f("div"),K=f("label"),K.textContent="Output Language:",ue=w(),U=f("select");for(let r=0;r<k.length;r+=1)k[r].c();se=w(),G=f("div"),z=f("label"),z.textContent="Voice:",R=w(),b=f("select");for(let r=0;r<y.length;r+=1)y[r].c();F=w(),O=f("button"),de=B(ce),ye=w(),ne=f("div"),E&&E.c(),p(l,"class","svelte-crumt5"),p(s,"class",a=fe(e[5]==="record"?"active":"")+" svelte-crumt5"),p(u,"class",g=fe(e[5]==="upload"?"active":"")+" svelte-crumt5"),p(o,"class","mode-selector svelte-crumt5"),p(j,"for","inputLanguage"),p(A,"class","svelte-crumt5"),e[2]===void 0&&te(()=>e[18].call(A)),p(K,"for","outputLanguage"),p(U,"class","svelte-crumt5"),e[3]===void 0&&te(()=>e[19].call(U)),p(z,"for","voice"),p(b,"class","svelte-crumt5"),e[7]===void 0&&te(()=>e[20].call(b)),O.disabled=e[0],p(O,"class","svelte-crumt5"),p(ne,"class","audio-player svelte-crumt5"),p(t,"class","container svelte-crumt5")},m(r,_){J(r,t,_),c(t,l),c(t,n),c(t,o),c(o,s),c(s,d),c(o,h),c(o,u),c(u,m),c(t,P),S&&S.m(t,null),c(t,$),L&&L.m(t,null),c(t,I),c(t,N),c(N,j),c(N,le),c(N,A);for(let i=0;i<v.length;i+=1)v[i]&&v[i].m(A,null);Z(A,e[2],!0),c(t,ie),c(t,M),c(M,K),c(M,ue),c(M,U);for(let i=0;i<k.length;i+=1)k[i]&&k[i].m(U,null);Z(U,e[3],!0),c(t,se),c(t,G),c(G,z),c(G,R),c(G,b);for(let i=0;i<y.length;i+=1)y[i]&&y[i].m(b,null);Z(b,e[7],!0),c(t,F),c(t,O),c(O,de),c(t,ye),c(t,ne),E&&E.m(ne,null),he||(we=[T(s,"click",e[14]),T(u,"click",e[15]),T(A,"change",e[18]),T(U,"change",e[19]),T(b,"change",e[20]),T(O,"click",e[13])],he=!0)},p(r,[_]){if(_&32&&a!==(a=fe(r[5]==="record"?"active":"")+" svelte-crumt5")&&p(s,"class",a),_&32&&g!==(g=fe(r[5]==="upload"?"active":"")+" svelte-crumt5")&&p(u,"class",g),r[5]==="upload"?S?S.p(r,_):(S=Ue(r),S.c(),S.m(t,$)):S&&(S.d(1),S=null),r[5]==="record"?L?L.p(r,_):(L=$e(r),L.c(),L.m(t,I)):L&&(L.d(1),L=null),_&1024){H=W(r[10]);let i;for(i=0;i<H.length;i+=1){const D=Oe(r,H,i);v[i]?v[i].p(D,_):(v[i]=Ie(D),v[i].c(),v[i].m(A,null))}for(;i<v.length;i+=1)v[i].d(1);v.length=H.length}if(_&1028&&Z(A,r[2]),_&1024){V=W(r[10]);let i;for(i=0;i<V.length;i+=1){const D=Ce(r,V,i);k[i]?k[i].p(D,_):(k[i]=Ne(D),k[i].c(),k[i].m(U,null))}for(;i<k.length;i+=1)k[i].d(1);k.length=V.length}if(_&1032&&Z(U,r[3]),_&512){Y=W(r[9]);let i;for(i=0;i<Y.length;i+=1){const D=Ae(r,Y,i);y[i]?y[i].p(D,_):(y[i]=Pe(D),y[i].c(),y[i].m(b,null))}for(;i<y.length;i+=1)y[i].d(1);y.length=Y.length}_&640&&Z(b,r[7]),_&1&&ce!==(ce=r[0]?"Generating...":"Submit")&&qe(de,ce),_&1&&(O.disabled=r[0]),r[6]?E?E.p(r,_):(E=Fe(r),E.c(),E.m(ne,null)):E&&(E.d(1),E=null)},i:C,o:C,d(r){r&&q(t),S&&S.d(),L&&L.d(),be(v,r),be(k,r),be(y,r),E&&E.d(),he=!1,re(we)}}}let ut="https://api.thevoicetranslator.com/process-audio";function st(e,t,l){let n,o=!1,s,d="en-US",a="es",h="",u=rt("");ze(e,u,R=>l(6,n=R));let m=!1,g,P,$="record";const I=[{label:"Juyoung"},{label:"Boyeon"},{label:"Jessica"},{label:"Aditi"},{label:"Nimal"},{label:"Jane"}],N=[{label:"Chinese",value:"zh-CN"},{label:"Korean",value:"ko-KR"},{label:"Dutch",value:"nl-NL"},{label:"Turkish",value:"tr-TR"},{label:"Swedish",value:"sv-SE"},{label:"Indonesian",value:"id-ID"},{label:"Filipino",value:"fil-PH"},{label:"Japanese",value:"ja-JP"},{label:"Ukrainian",value:"uk-UA"},{label:"Greek",value:"el-GR"},{label:"Czech",value:"cs-CZ"},{label:"Finnish",value:"fi-FI"},{label:"Romanian",value:"ro-RO"},{label:"Russian",value:"ru-RU"},{label:"Danish",value:"da-DK"},{label:"Bulgarian",value:"bg-BG"},{label:"Malay",value:"ms-MY"},{label:"Slovak",value:"sk-SK"},{label:"Croatian",value:"hr-HR"},{label:"Classic Arabic",value:"ar-SA"},{label:"Tamil",value:"ta-IN"},{label:"English",value:"en-US"},{label:"Polish",value:"pl-PL"},{label:"German",value:"de-DE"},{label:"Spanish",value:"es-ES"},{label:"French",value:"fr-FR"},{label:"Italian",value:"it-IT"},{label:"Hindi",value:"hi-IN"},{label:"Portuguese",value:"pt-BR"}];let j;async function le(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const R=await navigator.mediaDevices.getUserMedia({audio:!0}),b=new MediaRecorder(R);g=b,b.start();const F=[];b.addEventListener("dataavailable",O=>{F.push(O.data)}),b.addEventListener("stop",()=>{const O=new Blob(F.slice(0,15));URL.createObjectURL(O),P=new File([O],"recordedAudio.wav",{type:"audio/wav"}),l(1,s=P)}),l(4,m=!0),j=setTimeout(A,15e3)}else console.error("Recording not supported")}function A(){g&&(g.stop(),clearTimeout(j),l(4,m=!1))}async function ie(){l(0,o=!0),console.log("Submitting form..."),console.log(`Input Language: ${d}, Output Language: ${a}`);const R=new FormData;R.append("audio",s),R.append("input_lang",d),R.append("output_lang",a.substring(0,2)),R.append("voice",h),console.log("Sending request to server...");try{const b=await fetch(ut,{method:"POST",body:R});if(b.ok){console.log("Received response from server");const F=await b.blob();console.log("Received blob:",F),u.set(URL.createObjectURL(F))}else console.error("Server error:",b)}catch(b){console.error("Error sending request to server:",b)}l(0,o=!1)}const M=()=>l(5,$="record"),K=()=>l(5,$="upload"),ue=R=>{l(1,s=R.target.files[0]),console.log("Audio file selected:",s.name)},U=()=>m?A():le();function se(){d=_e(this),l(2,d),l(10,N)}function G(){a=_e(this),l(3,a),l(10,N)}function z(){h=_e(this),l(7,h),l(9,I)}return[o,s,d,a,m,$,n,h,u,I,N,le,A,ie,M,K,ue,U,se,G,z]}class ct extends nt{constructor(t){super(),lt(this,t,st,it,Be,{})}}new ct({target:document.getElementById("app")});
