var He=Object.defineProperty;var Ve=(e,t,l)=>t in e?He(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var _e=(e,t,l)=>(Ve(e,typeof t!="symbol"?t+"":t,l),l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const a of u.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function l(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(o){if(o.ep)return;o.ep=!0;const u=l(o);fetch(o.href,u)}})();function C(){}function Me(e){return e()}function Se(){return Object.create(null)}function ue(e){e.forEach(Me)}function Ge(e){return typeof e=="function"}function Je(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let de;function Le(e,t){return e===t?!0:(de||(de=document.createElement("a")),de.href=t,e===de.href)}function Ye(e){return Object.keys(e).length===0}function Ze(e,...t){if(e==null){for(const n of t)n(void 0);return C}const l=e.subscribe(...t);return l.unsubscribe?()=>l.unsubscribe():l}function Ae(e,t,l){e.$$.on_destroy.push(Ze(t,l))}function pe(e){return e??""}function c(e,t){e.appendChild(t)}function B(e,t,l){e.insertBefore(t,l||null)}function D(e){e.parentNode&&e.parentNode.removeChild(e)}function be(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function p(e){return document.createElement(e)}function N(e){return document.createTextNode(e)}function R(){return N(" ")}function q(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function b(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function Qe(e){return Array.from(e.childNodes)}function ye(e,t){t=""+t,e.data!==t&&(e.data=t)}function ke(e,t){e.value=t??""}function Ee(e,t,l,n){l==null?e.style.removeProperty(t):e.style.setProperty(t,l,n?"important":"")}function Q(e,t,l){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t){o.selected=!0;return}}(!l||t!==void 0)&&(e.selectedIndex=-1)}function ge(e){const t=e.querySelector(":checked");return t&&t.__value}let je;function ie(e){je=e}const ee=[],Ce=[];let te=[];const Ie=[],We=Promise.resolve();let me=!1;function Xe(){me||(me=!0,We.then(Ke))}function le(e){te.push(e)}const ve=new Set;let W=0;function Ke(){if(W!==0)return;const e=je;do{try{for(;W<ee.length;){const t=ee[W];W++,ie(t),xe(t.$$)}}catch(t){throw ee.length=0,W=0,t}for(ie(null),ee.length=0,W=0;Ce.length;)Ce.pop()();for(let t=0;t<te.length;t+=1){const l=te[t];ve.has(l)||(ve.add(l),l())}te.length=0}while(ee.length);for(;Ie.length;)Ie.pop()();me=!1,ve.clear(),ie(e)}function xe(e){if(e.fragment!==null){e.update(),ue(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(le)}}function et(e){const t=[],l=[];te.forEach(n=>e.indexOf(n)===-1?t.push(n):l.push(n)),l.forEach(n=>n()),te=t}const tt=new Set;function lt(e,t){e&&e.i&&(tt.delete(e),e.i(t))}function X(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function nt(e,t,l){const{fragment:n,after_update:o}=e.$$;n&&n.m(t,l),le(()=>{const u=e.$$.on_mount.map(Me).filter(Ge);e.$$.on_destroy?e.$$.on_destroy.push(...u):ue(u),e.$$.on_mount=[]}),o.forEach(le)}function ot(e,t){const l=e.$$;l.fragment!==null&&(et(l.after_update),ue(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function rt(e,t){e.$$.dirty[0]===-1&&(ee.push(e),Xe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function it(e,t,l,n,o,u,a=null,f=[-1]){const h=je;ie(e);const s=e.$$={fragment:null,ctx:[],props:u,update:C,not_equal:o,bound:Se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(h?h.$$.context:[])),callbacks:Se(),dirty:f,skip_bound:!1,root:t.target||h.$$.root};a&&a(s.root);let _=!1;if(s.ctx=l?l(e,t.props||{},(d,m,...T)=>{const F=T.length?T[0]:m;return s.ctx&&o(s.ctx[d],s.ctx[d]=F)&&(!s.skip_bound&&s.bound[d]&&s.bound[d](F),_&&rt(e,d)),m}):[],s.update(),_=!0,ue(s.before_update),s.fragment=n?n(s.ctx):!1,t.target){if(t.hydrate){const d=Qe(t.target);s.fragment&&s.fragment.l(d),d.forEach(D)}else s.fragment&&s.fragment.c();t.intro&&lt(e.$$.fragment),nt(e,t.target,t.anchor),Ke()}ie(h)}class ut{constructor(){_e(this,"$$");_e(this,"$$set")}$destroy(){ot(this,1),this.$destroy=C}$on(t,l){if(!Ge(l))return C;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const o=n.indexOf(l);o!==-1&&n.splice(o,1)}}$set(t){this.$$set&&!Ye(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const st="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(st);const x=[];function Ue(e,t=C){let l;const n=new Set;function o(f){if(Je(e,f)&&(e=f,l)){const h=!x.length;for(const s of n)s[1](),x.push(s,e);if(h){for(let s=0;s<x.length;s+=2)x[s][0](x[s+1]);x.length=0}}}function u(f){o(f(e))}function a(f,h=C){const s=[f,h];return n.add(s),n.size===1&&(l=t(o,u)||C),f(e),()=>{n.delete(s),n.size===0&&l&&(l(),l=null)}}return{set:o,update:u,subscribe:a}}function Oe(e,t,l){const n=e.slice();return n[8]=t[l],n}function Pe(e,t,l){const n=e.slice();return n[29]=t[l],n}function Ne(e,t,l){const n=e.slice();return n[29]=t[l],n}function Fe(e){let t,l,n,o,u,a,f,h;return{c(){t=p("div"),l=p("label"),l.textContent="Upload Audio:",n=R(),o=p("input"),u=R(),a=p("p"),a.textContent="File length max 30 seconds...",b(l,"for","audioFile"),b(o,"type","file"),b(o,"accept","audio/*"),b(o,"class","svelte-11f8joj")},m(s,_){B(s,t,_),c(t,l),c(t,n),c(t,o),c(t,u),c(t,a),f||(h=q(o,"change",e[18]),f=!0)},p:C,d(s){s&&D(t),f=!1,h()}}}function De(e){let t,l,n=e[4]?"Stop Recording":"Start Recording",o,u,a,f;function h(d,m){return d[4]?at:ct}let s=h(e),_=s(e);return{c(){t=p("div"),l=p("button"),o=N(n),u=R(),_.c(),Ee(l,"background-color",e[4]?"red":"green"),b(l,"class","svelte-11f8joj")},m(d,m){B(d,t,m),c(t,l),c(l,o),c(t,u),_.m(t,null),a||(f=q(l,"click",e[19]),a=!0)},p(d,m){m[0]&16&&n!==(n=d[4]?"Stop Recording":"Start Recording")&&ye(o,n),m[0]&16&&Ee(l,"background-color",d[4]?"red":"green"),s===(s=h(d))&&_?_.p(d,m):(_.d(1),_=s(d),_&&(_.c(),_.m(t,null)))},d(d){d&&D(t),_.d(),a=!1,f()}}}function ct(e){let t;return{c(){t=p("p"),t.textContent="Can record up to 15 seconds..."},m(l,n){B(l,t,n)},p:C,d(l){l&&D(t)}}}function at(e){let t,l,n,o,u;return{c(){t=p("p"),l=N("Recording... "),n=p("span"),o=N(e[6]),u=N(" seconds left")},m(a,f){B(a,t,f),c(t,l),c(t,n),c(n,o),c(t,u)},p(a,f){f[0]&64&&ye(o,a[6])},d(a){a&&D(t)}}}function Te(e){let t,l=e[29].label+"",n;return{c(){t=p("option"),n=N(l),t.__value=e[29].value,ke(t,t.__value)},m(o,u){B(o,t,u),c(t,n)},p:C,d(o){o&&D(t)}}}function $e(e){let t,l=e[29].label+"",n;return{c(){t=p("option"),n=N(l),t.__value=e[29].value,ke(t,t.__value)},m(o,u){B(o,t,u),c(t,n)},p:C,d(o){o&&D(t)}}}function qe(e){let t,l=e[8].label+"",n;return{c(){t=p("option"),n=N(l),t.__value=e[8].label,ke(t,t.__value)},m(o,u){B(o,t,u),c(t,n)},p:C,d(o){o&&D(t)}}}function Be(e){let t,l,n,o;return{c(){t=p("audio"),Le(t.src,l=e[7])||b(t,"src",l),t.controls=!0},m(u,a){B(u,t,a),n||(o=q(t,"play",ze),n=!0)},p(u,a){a[0]&128&&!Le(t.src,l=u[7])&&b(t,"src",l)},d(u){u&&D(t),n=!1,o()}}}function ft(e){let t,l,n,o,u,a,f,h,s,_,d,m,T,F,U,M,ne,I,oe,G,$,se,O,ce,z,H,ae,P,fe,g,y=e[0]?"Generating...":"Submit",J,S,we,re,he,Re,L=e[5]==="upload"&&Fe(e),A=e[5]==="record"&&De(e),V=X(e[12]),k=[];for(let r=0;r<V.length;r+=1)k[r]=Te(Ne(e,V,r));let Y=X(e[12]),j=[];for(let r=0;r<Y.length;r+=1)j[r]=$e(Pe(e,Y,r));let Z=X(e[11]),w=[];for(let r=0;r<Z.length;r+=1)w[r]=qe(Oe(e,Z,r));let E=e[7]&&Be(e);return{c(){t=p("div"),l=p("h1"),l.textContent="Audio Translation App",n=R(),o=p("div"),u=p("button"),a=N("Record Audio"),h=R(),s=p("button"),_=N("Upload Audio"),m=R(),L&&L.c(),T=R(),A&&A.c(),F=R(),U=p("div"),M=p("label"),M.textContent="Input Language:",ne=R(),I=p("select");for(let r=0;r<k.length;r+=1)k[r].c();oe=R(),G=p("div"),$=p("label"),$.textContent="Output Language:",se=R(),O=p("select");for(let r=0;r<j.length;r+=1)j[r].c();ce=R(),z=p("div"),H=p("label"),H.textContent="Voice:",ae=R(),P=p("select");for(let r=0;r<w.length;r+=1)w[r].c();fe=R(),g=p("button"),J=N(y),we=R(),re=p("div"),E&&E.c(),b(l,"class","svelte-11f8joj"),b(u,"class",f=pe(e[5]==="record"?"active":"")+" svelte-11f8joj"),b(s,"class",d=pe(e[5]==="upload"?"active":"")+" svelte-11f8joj"),b(o,"class","mode-selector svelte-11f8joj"),b(M,"for","inputLanguage"),b(I,"class","svelte-11f8joj"),e[2]===void 0&&le(()=>e[20].call(I)),b($,"for","outputLanguage"),b(O,"class","svelte-11f8joj"),e[3]===void 0&&le(()=>e[21].call(O)),b(H,"for","voice"),b(P,"class","svelte-11f8joj"),e[8]===void 0&&le(()=>e[22].call(P)),g.disabled=S=e[0]||e[4],b(g,"class","svelte-11f8joj"),b(re,"class","audio-player svelte-11f8joj"),b(t,"class","container svelte-11f8joj")},m(r,v){B(r,t,v),c(t,l),c(t,n),c(t,o),c(o,u),c(u,a),c(o,h),c(o,s),c(s,_),c(t,m),L&&L.m(t,null),c(t,T),A&&A.m(t,null),c(t,F),c(t,U),c(U,M),c(U,ne),c(U,I);for(let i=0;i<k.length;i+=1)k[i]&&k[i].m(I,null);Q(I,e[2],!0),c(t,oe),c(t,G),c(G,$),c(G,se),c(G,O);for(let i=0;i<j.length;i+=1)j[i]&&j[i].m(O,null);Q(O,e[3],!0),c(t,ce),c(t,z),c(z,H),c(z,ae),c(z,P);for(let i=0;i<w.length;i+=1)w[i]&&w[i].m(P,null);Q(P,e[8],!0),c(t,fe),c(t,g),c(g,J),c(t,we),c(t,re),E&&E.m(re,null),he||(Re=[q(u,"click",e[16]),q(s,"click",e[17]),q(I,"change",e[20]),q(O,"change",e[21]),q(P,"change",e[22]),q(g,"click",e[15])],he=!0)},p(r,v){if(v[0]&32&&f!==(f=pe(r[5]==="record"?"active":"")+" svelte-11f8joj")&&b(u,"class",f),v[0]&32&&d!==(d=pe(r[5]==="upload"?"active":"")+" svelte-11f8joj")&&b(s,"class",d),r[5]==="upload"?L?L.p(r,v):(L=Fe(r),L.c(),L.m(t,T)):L&&(L.d(1),L=null),r[5]==="record"?A?A.p(r,v):(A=De(r),A.c(),A.m(t,F)):A&&(A.d(1),A=null),v[0]&4096){V=X(r[12]);let i;for(i=0;i<V.length;i+=1){const K=Ne(r,V,i);k[i]?k[i].p(K,v):(k[i]=Te(K),k[i].c(),k[i].m(I,null))}for(;i<k.length;i+=1)k[i].d(1);k.length=V.length}if(v[0]&4100&&Q(I,r[2]),v[0]&4096){Y=X(r[12]);let i;for(i=0;i<Y.length;i+=1){const K=Pe(r,Y,i);j[i]?j[i].p(K,v):(j[i]=$e(K),j[i].c(),j[i].m(O,null))}for(;i<j.length;i+=1)j[i].d(1);j.length=Y.length}if(v[0]&4104&&Q(O,r[3]),v[0]&2048){Z=X(r[11]);let i;for(i=0;i<Z.length;i+=1){const K=Oe(r,Z,i);w[i]?w[i].p(K,v):(w[i]=qe(K),w[i].c(),w[i].m(P,null))}for(;i<w.length;i+=1)w[i].d(1);w.length=Z.length}v[0]&2304&&Q(P,r[8]),v[0]&1&&y!==(y=r[0]?"Generating...":"Submit")&&ye(J,y),v[0]&17&&S!==(S=r[0]||r[4])&&(g.disabled=S),r[7]?E?E.p(r,v):(E=Be(r),E.c(),E.m(re,null)):E&&(E.d(1),E=null)},i:C,o:C,d(r){r&&D(t),L&&L.d(),A&&A.d(),be(k,r),be(j,r),be(w,r),E&&E.d(),he=!1,ue(Re)}}}let dt="https://api.thevoicetranslator.com/process-audio";function ze(){const e=document.querySelector("audio");e&&e.play()}function pt(e,t,l){let n,o,u=!1,a,f="en-US",h="es",s="",_=Ue("");Ae(e,_,g=>l(7,o=g));let d=!1,m,T,F="record",U=Ue(15);Ae(e,U,g=>l(6,n=g));let M;const ne=[{label:"Juyoung"},{label:"Jessica"},{label:"Aditi"},{label:"Jane"}],I=[{label:"Chinese",value:"zh-CN"},{label:"Korean",value:"ko-KR"},{label:"Dutch",value:"nl-NL"},{label:"Turkish",value:"tr-TR"},{label:"Swedish",value:"sv-SE"},{label:"Indonesian",value:"id-ID"},{label:"Filipino",value:"fil-PH"},{label:"Japanese",value:"ja-JP"},{label:"Ukrainian",value:"uk-UA"},{label:"Greek",value:"el-GR"},{label:"Czech",value:"cs-CZ"},{label:"Finnish",value:"fi-FI"},{label:"Romanian",value:"ro-RO"},{label:"Russian",value:"ru-RU"},{label:"Danish",value:"da-DK"},{label:"Bulgarian",value:"bg-BG"},{label:"Malay",value:"ms-MY"},{label:"Slovak",value:"sk-SK"},{label:"Croatian",value:"hr-HR"},{label:"Classic Arabic",value:"ar-SA"},{label:"Tamil",value:"ta-IN"},{label:"English",value:"en-US"},{label:"Polish",value:"pl-PL"},{label:"German",value:"de-DE"},{label:"Spanish",value:"es-ES"},{label:"French",value:"fr-FR"},{label:"Italian",value:"it-IT"},{label:"Hindi",value:"hi-IN"},{label:"Portuguese",value:"pt-BR"}];let oe;async function G(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const g=await navigator.mediaDevices.getUserMedia({audio:!0}),y=new MediaRecorder(g);m=y,y.start();const J=[];y.addEventListener("dataavailable",S=>{J.push(S.data)}),y.addEventListener("stop",()=>{const S=new Blob(J.slice(0,15));URL.createObjectURL(S),T=new File([S],"recordedAudio.wav",{type:"audio/wav"}),l(1,a=T)}),l(4,d=!0),U.set(15),M=setInterval(()=>{U.update(S=>S===0?(clearInterval(M),$(),0):S-1)},1e3),oe=setTimeout($,15e3)}else console.error("Recording not supported")}function $(){m&&(m.stop(),clearTimeout(oe),clearInterval(M),l(4,d=!1),U.set(15))}async function se(){l(0,u=!0);const g=new FormData;g.append("audio",a),g.append("input_lang",f),g.append("output_lang",h.substring(0,2)),g.append("voice",s);try{const y=await fetch(dt,{method:"POST",body:g});if(y.ok){const J=await y.blob(),S=URL.createObjectURL(J);_.set(S),ze()}else console.error("Server error:",y)}catch(y){console.error("Error sending request to server:",y)}l(0,u=!1)}const O=()=>l(5,F="record"),ce=()=>l(5,F="upload"),z=g=>{l(1,a=g.target.files[0]),console.log("Audio file selected:",a.name)},H=()=>d?$():G();function ae(){f=ge(this),l(2,f),l(12,I)}function P(){h=ge(this),l(3,h),l(12,I)}function fe(){s=ge(this),l(8,s),l(11,ne)}return[u,a,f,h,d,F,n,o,s,_,U,ne,I,G,$,se,O,ce,z,H,ae,P,fe]}class ht extends ut{constructor(t){super(),it(this,t,pt,ft,Je,{},null,[-1,-1])}}new ht({target:document.getElementById("app")});
