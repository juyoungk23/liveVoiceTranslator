var Fe=Object.defineProperty;var je=(e,t,n)=>t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var re=(e,t,n)=>(je(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function F(){}function Pe(e){return e()}function we(){return Object.create(null)}function te(e){e.forEach(Pe)}function _e(e){return typeof e=="function"}function Ne(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ue;function Se(e,t){return e===t?!0:(ue||(ue=document.createElement("a")),ue.href=t,e===ue.href)}function Be(e){return Object.keys(e).length===0}function Te(e,...t){if(e==null){for(const l of t)l(void 0);return F}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ce(e,t,n){e.$$.on_destroy.push(Te(t,n))}function ke(e){return e??""}function Re(e,t,n){return e.set(n),t}function u(e,t){e.appendChild(t)}function ne(e,t,n){e.insertBefore(t,n||null)}function Y(e){e.parentNode&&e.parentNode.removeChild(e)}function ae(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function M(e){return document.createTextNode(e)}function I(){return M(" ")}function V(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function c(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Me(e){return Array.from(e.childNodes)}function se(e,t){t=""+t,e.data!==t&&(e.data=t)}function he(e,t){e.value=t??""}function Z(e,t,n){for(let l=0;l<e.options.length;l+=1){const o=e.options[l];if(o.__value===t){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function fe(e){const t=e.querySelector(":checked");return t&&t.__value}function H(e,t,n){e.classList.toggle(t,!!n)}let be;function le(e){be=e}const X=[],Ee=[];let x=[];const Oe=[],qe=Promise.resolve();let ge=!1;function Je(){ge||(ge=!0,qe.then(De))}function ee(e){x.push(e)}const de=new Set;let Q=0;function De(){if(Q!==0)return;const e=be;do{try{for(;Q<X.length;){const t=X[Q];Q++,le(t),Ke(t.$$)}}catch(t){throw X.length=0,Q=0,t}for(le(null),X.length=0,Q=0;Ee.length;)Ee.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];de.has(n)||(de.add(n),n())}x.length=0}while(X.length);for(;Oe.length;)Oe.pop()();ge=!1,de.clear(),le(e)}function Ke(e){if(e.fragment!==null){e.update(),te(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ee)}}function ze(e){const t=[],n=[];x.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),x=t}const Ge=new Set;function He(e,t){e&&e.i&&(Ge.delete(e),e.i(t))}function oe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ve(e,t,n){const{fragment:l,after_update:o}=e.$$;l&&l.m(t,n),ee(()=>{const a=e.$$.on_mount.map(Pe).filter(_e);e.$$.on_destroy?e.$$.on_destroy.push(...a):te(a),e.$$.on_mount=[]}),o.forEach(ee)}function Ye(e,t){const n=e.$$;n.fragment!==null&&(ze(n.after_update),te(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ze(e,t){e.$$.dirty[0]===-1&&(X.push(e),Je(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Qe(e,t,n,l,o,a,h=null,f=[-1]){const _=be;le(e);const i=e.$$={fragment:null,ctx:[],props:a,update:F,not_equal:o,bound:we(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(_?_.$$.context:[])),callbacks:we(),dirty:f,skip_bound:!1,root:t.target||_.$$.root};h&&h(i.root);let U=!1;if(i.ctx=n?n(e,t.props||{},(s,y,...P)=>{const L=P.length?P[0]:y;return i.ctx&&o(i.ctx[s],i.ctx[s]=L)&&(!i.skip_bound&&i.bound[s]&&i.bound[s](L),U&&Ze(e,s)),y}):[],i.update(),U=!0,te(i.before_update),i.fragment=l?l(i.ctx):!1,t.target){if(t.hydrate){const s=Me(t.target);i.fragment&&i.fragment.l(s),s.forEach(Y)}else i.fragment&&i.fragment.c();t.intro&&He(e.$$.fragment),Ve(e,t.target,t.anchor),De()}le(_)}class We{constructor(){re(this,"$$");re(this,"$$set")}$destroy(){Ye(this,1),this.$destroy=F}$on(t,n){if(!_e(n))return F;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(t){this.$$set&&!Be(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Xe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Xe);const W=[];function pe(e,t=F){let n;const l=new Set;function o(f){if(Ne(e,f)&&(e=f,n)){const _=!W.length;for(const i of l)i[1](),W.push(i,e);if(_){for(let i=0;i<W.length;i+=2)W[i][0](W[i+1]);W.length=0}}}function a(f){o(f(e))}function h(f,_=F){const i=[f,_];return l.add(i),l.size===1&&(n=t(o,a)||F),f(e),()=>{l.delete(i),l.size===0&&n&&(n(),n=null)}}return{set:o,update:a,subscribe:h}}const xe=[{label:"Juyoung"},{label:"Jessica"},{label:"Aditi"},{label:"Jane"}],Ce=[{label:"Korean",value:"ko-KR"},{label:"English",value:"en-US"},{label:"Spanish",value:"es-ES"},{label:"French",value:"fr-FR"},{label:"Italian",value:"it-IT"},{label:"Hindi",value:"hi-IN"},{label:"Chinese",value:"zh-CN"},{label:"Dutch",value:"nl-NL"},{label:"Turkish",value:"tr-TR"},{label:"Swedish",value:"sv-SE"},{label:"Indonesian",value:"id-ID"},{label:"Filipino",value:"fil-PH"},{label:"Japanese",value:"ja-JP"},{label:"Ukrainian",value:"uk-UA"},{label:"Greek",value:"el-GR"},{label:"Czech",value:"cs-CZ"},{label:"Finnish",value:"fi-FI"},{label:"Romanian",value:"ro-RO"},{label:"Russian",value:"ru-RU"},{label:"Danish",value:"da-DK"},{label:"Bulgarian",value:"bg-BG"},{label:"Malay",value:"ms-MY"},{label:"Slovak",value:"sk-SK"},{label:"Croatian",value:"hr-HR"},{label:"Classic Arabic",value:"ar-SA"},{label:"Tamil",value:"ta-IN"},{label:"Polish",value:"pl-PL"},{label:"German",value:"de-DE"},{label:"Portuguese",value:"pt-BR"}];function Ie(e,t,n){const l=e.slice();return l[20]=t[n][0],l[21]=t[n][1],l[22]=t,l[23]=n,l}function et(e,t,n){const l=e.slice();return l[24]=t[n],l}function tt(e,t,n){const l=e.slice();return l[27]=t[n],l}function nt(e,t,n){const l=e.slice();return l[27]=t[n],l}function lt(e){let t;return{c(){t=p("option"),t.textContent=`${e[27].label}`,t.__value=e[27].value,he(t,t.__value)},m(n,l){ne(n,t,l)},p:F,d(n){n&&Y(t)}}}function ot(e){let t;return{c(){t=p("option"),t.textContent=`${e[27].label}`,t.__value=e[27].value,he(t,t.__value)},m(n,l){ne(n,t,l)},p:F,d(n){n&&Y(t)}}}function ut(e){let t;return{c(){t=p("option"),t.textContent=`${e[24].label}`,t.__value=e[24].label,he(t,t.__value)},m(n,l){ne(n,t,l)},p:F,d(n){n&&Y(t)}}}function Ue(e){let t,n,l=e[20]+"",o,a,h,f,_,i,U,s,y,P,L,O,J,B,K,R,q,N,D,d,g,$,w,E,j,S,v,m,k,b=oe(Ce),T=[];for(let r=0;r<b.length;r+=1)T[r]=lt(nt(e,b,r));function ve(){e[14].call(s,e[22],e[23])}let me=oe(Ce),z=[];for(let r=0;r<me.length;r+=1)z[r]=ot(tt(e,me,r));function ye(){e[15].call(R,e[22],e[23])}let Le=oe(xe),G=[];for(let r=0;r<Le.length;r+=1)G[r]=ut(et(e,Le,r));function $e(){e[16].call(E,e[22],e[23])}return{c(){t=p("div"),n=p("h2"),o=M(l),a=I(),h=p("div"),f=p("label"),_=M("Input Language:"),U=I(),s=p("select");for(let r=0;r<T.length;r+=1)T[r].c();P=I(),L=p("div"),O=p("label"),J=M("Output Language:"),K=I(),R=p("select");for(let r=0;r<z.length;r+=1)z[r].c();N=I(),D=p("div"),d=p("label"),g=M("Voice:"),w=I(),E=p("select");for(let r=0;r<G.length;r+=1)G[r].c();S=I(),c(f,"for",i=`${e[20]}-inputLanguage`),c(s,"id",y=`${e[20]}-inputLanguage`),c(s,"class","svelte-p7yfcd"),e[21].inputLanguage===void 0&&ee(ve),c(O,"for",B=`${e[20]}-outputLanguage`),c(R,"id",q=`${e[20]}-outputLanguage`),c(R,"class","svelte-p7yfcd"),e[21].outputLanguage===void 0&&ee(ye),c(d,"for",$=`${e[20]}-voice`),c(E,"id",j=`${e[20]}-voice`),c(E,"class","svelte-p7yfcd"),e[21].voice===void 0&&ee($e),c(t,"class",v=ke(`column ${e[3]===e[20]?"active":""}`)+" svelte-p7yfcd")},m(r,A){ne(r,t,A),u(t,n),u(n,o),u(t,a),u(t,h),u(h,f),u(f,_),u(h,U),u(h,s);for(let C=0;C<T.length;C+=1)T[C]&&T[C].m(s,null);Z(s,e[21].inputLanguage,!0),u(t,P),u(t,L),u(L,O),u(O,J),u(L,K),u(L,R);for(let C=0;C<z.length;C+=1)z[C]&&z[C].m(R,null);Z(R,e[21].outputLanguage,!0),u(t,N),u(t,D),u(D,d),u(d,g),u(D,w),u(D,E);for(let C=0;C<G.length;C+=1)G[C]&&G[C].m(E,null);Z(E,e[21].voice,!0),u(t,S),m||(k=[V(s,"change",ve),V(R,"change",ye),V(E,"change",$e)],m=!0)},p(r,A){e=r,A[0]&4&&l!==(l=e[20]+"")&&se(o,l),A[0]&4&&i!==(i=`${e[20]}-inputLanguage`)&&c(f,"for",i),A[0]&4&&y!==(y=`${e[20]}-inputLanguage`)&&c(s,"id",y),A[0]&4&&Z(s,e[21].inputLanguage),A[0]&4&&B!==(B=`${e[20]}-outputLanguage`)&&c(O,"for",B),A[0]&4&&q!==(q=`${e[20]}-outputLanguage`)&&c(R,"id",q),A[0]&4&&Z(R,e[21].outputLanguage),A[0]&4&&$!==($=`${e[20]}-voice`)&&c(d,"for",$),A[0]&4&&j!==(j=`${e[20]}-voice`)&&c(E,"id",j),A[0]&4&&Z(E,e[21].voice),A[0]&12&&v!==(v=ke(`column ${e[3]===e[20]?"active":""}`)+" svelte-p7yfcd")&&c(t,"class",v)},d(r){r&&Y(t),ae(T,r),ae(z,r),ae(G,r),m=!1,te(k)}}}function Ae(e){let t,n,l;return{c(){t=p("div"),n=p("audio"),Se(n.src,l=e[5])||c(n,"src",l),n.controls=!0,c(t,"class","audio-player svelte-p7yfcd")},m(o,a){ne(o,t,a),u(t,n)},p(o,a){a[0]&32&&!Se(n.src,l=o[5])&&c(n,"src",l)},d(o){o&&Y(t)}}}function it(e){let t,n,l,o,a,h,f,_,i,U,s,y=e[1]?"Stop Recording":"Start Recording",P,L,O,J,B,K,R,q,N,D=e[0]?"Submitting...":"Submit",d,g,$,w,E,j=oe(Object.entries(e[2])),S=[];for(let m=0;m<j.length;m+=1)S[m]=Ue(Ie(e,j,m));let v=e[5]&&Ae(e);return{c(){t=p("div"),n=p("h1"),n.textContent="Audio Translation App",l=I(),o=p("div"),a=p("button"),a.textContent="Person 1",h=I(),f=p("button"),f.textContent="Person 2",_=I(),i=p("div");for(let m=0;m<S.length;m+=1)S[m].c();U=I(),s=p("button"),P=M(y),L=I(),O=p("p"),J=M("Recording... "),B=p("span"),K=M(e[4]),R=M(" seconds left"),q=I(),N=p("button"),d=M(D),$=I(),v&&v.c(),c(n,"class","svelte-p7yfcd"),c(a,"class","svelte-p7yfcd"),H(a,"active",e[3]==="person1"),c(f,"class","svelte-p7yfcd"),H(f,"active",e[3]==="person2"),c(o,"class","mode-selector svelte-p7yfcd"),c(i,"class","settings svelte-p7yfcd"),s.disabled=e[0],c(s,"class","svelte-p7yfcd"),H(s,"record-button",!0),H(s,"red",e[1]),c(O,"class","svelte-p7yfcd"),N.disabled=g=e[0]||e[1],c(N,"class","svelte-p7yfcd"),c(t,"class","container svelte-p7yfcd")},m(m,k){ne(m,t,k),u(t,n),u(t,l),u(t,o),u(o,a),u(o,h),u(o,f),u(t,_),u(t,i);for(let b=0;b<S.length;b+=1)S[b]&&S[b].m(i,null);u(t,U),u(t,s),u(s,P),u(t,L),u(t,O),u(O,J),u(O,B),u(B,K),u(O,R),u(t,q),u(t,N),u(N,d),u(t,$),v&&v.m(t,null),w||(E=[V(a,"click",e[12]),V(f,"click",e[13]),V(s,"click",function(){_e(e[1]?e[10]:e[9])&&(e[1]?e[10]:e[9]).apply(this,arguments)}),V(N,"click",e[11])],w=!0)},p(m,k){if(e=m,k[0]&8&&H(a,"active",e[3]==="person1"),k[0]&8&&H(f,"active",e[3]==="person2"),k[0]&12){j=oe(Object.entries(e[2]));let b;for(b=0;b<j.length;b+=1){const T=Ie(e,j,b);S[b]?S[b].p(T,k):(S[b]=Ue(T),S[b].c(),S[b].m(i,null))}for(;b<S.length;b+=1)S[b].d(1);S.length=j.length}k[0]&2&&y!==(y=e[1]?"Stop Recording":"Start Recording")&&se(P,y),k[0]&1&&(s.disabled=e[0]),k[0]&2&&H(s,"red",e[1]),k[0]&16&&se(K,e[4]),k[0]&1&&D!==(D=e[0]?"Submitting...":"Submit")&&se(d,D),k[0]&3&&g!==(g=e[0]||e[1])&&(N.disabled=g),e[5]?v?v.p(e,k):(v=Ae(e),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},i:F,o:F,d(m){m&&Y(t),ae(S,m),v&&v.d(),w=!1,te(E)}}}let at="https://api.thevoicetranslator.com/process-audio",ie=30;function st(e,t,n){let l,o,a,h,f=!1,_=!1,i,U=pe("person1");ce(e,U,d=>n(3,l=d));let s=pe("");ce(e,s,d=>n(5,a=d));let y=pe(ie);ce(e,y,d=>n(4,o=d));let P,L={person1:{inputLanguage:"en-US",outputLanguage:"es",voice:""},person2:{inputLanguage:"en-US",outputLanguage:"es",voice:""}};async function O(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error("Recording not supported");return}const d=await navigator.mediaDevices.getUserMedia({audio:!0}),g=new MediaRecorder(d);i=g,g.start();let $=[];g.addEventListener("dataavailable",w=>{$.push(w.data)}),g.addEventListener("stop",()=>{const w=new Blob($);h=new File([w],"recordedAudio.wav",{type:"audio/wav"}),s.set(URL.createObjectURL(w))}),n(1,_=!0),y.set(ie),P=setInterval(()=>{y.update(w=>w>0?w-1:0)},1e3),setTimeout(()=>{_&&J()},ie*1e3)}function J(){i&&(i.stop(),clearInterval(P),n(1,_=!1),y.set(ie))}async function B(){n(0,f=!0);let d=l==="person1"?L.person1:L.person2;const g=new FormData;g.append("audio",h),g.append("input_lang",d.inputLanguage),g.append("output_lang",d.outputLanguage.substring(0,2)),g.append("voice",d.voice);for(let[$,w]of g.entries())console.log($,w);try{const $=await fetch(at,{method:"POST",body:g});if($.ok){const w=await $.blob(),E=URL.createObjectURL(w);s.set(E)}else console.error("Server error:",$);n(0,f=!1)}catch($){console.error("Failed to submit audio:",$),n(0,f=!1)}}const K=()=>{_||Re(U,l="person1",l)},R=()=>{_||Re(U,l="person2",l)};function q(d,g){d[g][1].inputLanguage=fe(this),n(2,L)}function N(d,g){d[g][1].outputLanguage=fe(this),n(2,L)}function D(d,g){d[g][1].voice=fe(this),n(2,L)}return[f,_,L,l,o,a,U,s,y,O,J,B,K,R,q,N,D]}class rt extends We{constructor(t){super(),Qe(this,t,st,it,Ne,{},null,[-1,-1])}}new rt({target:document.getElementById("app")});
