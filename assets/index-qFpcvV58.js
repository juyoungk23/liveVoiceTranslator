var ze=Object.defineProperty;var He=(e,t,l)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var he=(e,t,l)=>(He(e,typeof t!="symbol"?t+"":t,l),l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function l(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=l(o);fetch(o.href,s)}})();function A(){}function Me(e){return e()}function Le(){return Object.create(null)}function ue(e){e.forEach(Me)}function Ge(e){return typeof e=="function"}function Je(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let de;function je(e,t){return e===t?!0:(de||(de=document.createElement("a")),de.href=t,e===de.href)}function Ve(e){return Object.keys(e).length===0}function Ye(e,...t){if(e==null){for(const n of t)n(void 0);return A}const l=e.subscribe(...t);return l.unsubscribe?()=>l.unsubscribe():l}function Ee(e,t,l){e.$$.on_destroy.push(Ye(t,l))}function be(e){return e??""}function c(e,t){e.appendChild(t)}function q(e,t,l){e.insertBefore(t,l||null)}function F(e){e.parentNode&&e.parentNode.removeChild(e)}function _e(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function b(e){return document.createElement(e)}function N(e){return document.createTextNode(e)}function S(){return N(" ")}function K(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function _(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function Ze(e){return Array.from(e.childNodes)}function we(e,t){t=""+t,e.data!==t&&(e.data=t)}function ke(e,t){e.value=t??""}function Ae(e,t,l,n){l==null?e.style.removeProperty(t):e.style.setProperty(t,l,n?"important":"")}function Q(e,t,l){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t){o.selected=!0;return}}(!l||t!==void 0)&&(e.selectedIndex=-1)}function ge(e){const t=e.querySelector(":checked");return t&&t.__value}let ye;function ie(e){ye=e}const ee=[],Ce=[];let te=[];const Ie=[],Qe=Promise.resolve();let me=!1;function We(){me||(me=!0,Qe.then(Ke))}function le(e){te.push(e)}const ve=new Set;let W=0;function Ke(){if(W!==0)return;const e=ye;do{try{for(;W<ee.length;){const t=ee[W];W++,ie(t),Xe(t.$$)}}catch(t){throw ee.length=0,W=0,t}for(ie(null),ee.length=0,W=0;Ce.length;)Ce.pop()();for(let t=0;t<te.length;t+=1){const l=te[t];ve.has(l)||(ve.add(l),l())}te.length=0}while(ee.length);for(;Ie.length;)Ie.pop()();me=!1,ve.clear(),ie(e)}function Xe(e){if(e.fragment!==null){e.update(),ue(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(le)}}function xe(e){const t=[],l=[];te.forEach(n=>e.indexOf(n)===-1?t.push(n):l.push(n)),l.forEach(n=>n()),te=t}const et=new Set;function tt(e,t){e&&e.i&&(et.delete(e),e.i(t))}function X(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function lt(e,t,l){const{fragment:n,after_update:o}=e.$$;n&&n.m(t,l),le(()=>{const s=e.$$.on_mount.map(Me).filter(Ge);e.$$.on_destroy?e.$$.on_destroy.push(...s):ue(s),e.$$.on_mount=[]}),o.forEach(le)}function nt(e,t){const l=e.$$;l.fragment!==null&&(xe(l.after_update),ue(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function ot(e,t){e.$$.dirty[0]===-1&&(ee.push(e),We(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function rt(e,t,l,n,o,s,a=null,f=[-1]){const p=ye;ie(e);const u=e.$$={fragment:null,ctx:[],props:s,update:A,not_equal:o,bound:Le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:Le(),dirty:f,skip_bound:!1,root:t.target||p.$$.root};a&&a(u.root);let h=!1;if(u.ctx=l?l(e,t.props||{},(d,m,...D)=>{const $=D.length?D[0]:m;return u.ctx&&o(u.ctx[d],u.ctx[d]=$)&&(!u.skip_bound&&u.bound[d]&&u.bound[d]($),h&&ot(e,d)),m}):[],u.update(),h=!0,ue(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const d=Ze(t.target);u.fragment&&u.fragment.l(d),d.forEach(F)}else u.fragment&&u.fragment.c();t.intro&&tt(e.$$.fragment),lt(e,t.target,t.anchor),Ke()}ie(p)}class it{constructor(){he(this,"$$");he(this,"$$set")}$destroy(){nt(this,1),this.$destroy=A}$on(t,l){if(!Ge(l))return A;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const o=n.indexOf(l);o!==-1&&n.splice(o,1)}}$set(t){this.$$set&&!Ve(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ut="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ut);const x=[];function Oe(e,t=A){let l;const n=new Set;function o(f){if(Je(e,f)&&(e=f,l)){const p=!x.length;for(const u of n)u[1](),x.push(u,e);if(p){for(let u=0;u<x.length;u+=2)x[u][0](x[u+1]);x.length=0}}}function s(f){o(f(e))}function a(f,p=A){const u=[f,p];return n.add(u),n.size===1&&(l=t(o,s)||A),f(e),()=>{n.delete(u),n.size===0&&l&&(l(),l=null)}}return{set:o,update:s,subscribe:a}}function Ue(e,t,l){const n=e.slice();return n[8]=t[l],n}function Pe(e,t,l){const n=e.slice();return n[29]=t[l],n}function Ne(e,t,l){const n=e.slice();return n[29]=t[l],n}function $e(e){let t,l,n,o,s,a,f,p;return{c(){t=b("div"),l=b("label"),l.textContent="Upload Audio:",n=S(),o=b("input"),s=S(),a=b("p"),a.textContent="File length max 30 seconds...",_(l,"for","audioFile"),_(o,"type","file"),_(o,"accept","audio/*"),_(o,"class","svelte-jwb99f")},m(u,h){q(u,t,h),c(t,l),c(t,n),c(t,o),c(t,s),c(t,a),f||(p=K(o,"change",e[18]),f=!0)},p:A,d(u){u&&F(t),f=!1,p()}}}function Fe(e){let t,l,n=e[4]?"Stop Recording":"Start Recording",o,s,a,f;function p(d,m){return d[4]?ct:st}let u=p(e),h=u(e);return{c(){t=b("div"),l=b("button"),o=N(n),s=S(),h.c(),Ae(l,"background-color",e[4]?"red":"green"),_(l,"class","svelte-jwb99f")},m(d,m){q(d,t,m),c(t,l),c(l,o),c(t,s),h.m(t,null),a||(f=K(l,"click",e[19]),a=!0)},p(d,m){m[0]&16&&n!==(n=d[4]?"Stop Recording":"Start Recording")&&we(o,n),m[0]&16&&Ae(l,"background-color",d[4]?"red":"green"),u===(u=p(d))&&h?h.p(d,m):(h.d(1),h=u(d),h&&(h.c(),h.m(t,null)))},d(d){d&&F(t),h.d(),a=!1,f()}}}function st(e){let t;return{c(){t=b("p"),t.textContent="Can record up to 15 seconds..."},m(l,n){q(l,t,n)},p:A,d(l){l&&F(t)}}}function ct(e){let t,l,n,o,s;return{c(){t=b("p"),l=N("Recording... "),n=b("span"),o=N(e[6]),s=N(" seconds left")},m(a,f){q(a,t,f),c(t,l),c(t,n),c(n,o),c(t,s)},p(a,f){f[0]&64&&we(o,a[6])},d(a){a&&F(t)}}}function De(e){let t,l=e[29].label+"",n;return{c(){t=b("option"),n=N(l),t.__value=e[29].value,ke(t,t.__value)},m(o,s){q(o,t,s),c(t,n)},p:A,d(o){o&&F(t)}}}function Te(e){let t,l=e[29].label+"",n;return{c(){t=b("option"),n=N(l),t.__value=e[29].value,ke(t,t.__value)},m(o,s){q(o,t,s),c(t,n)},p:A,d(o){o&&F(t)}}}function Be(e){let t,l=e[8].label+"",n;return{c(){t=b("option"),n=N(l),t.__value=e[8].label,ke(t,t.__value)},m(o,s){q(o,t,s),c(t,n)},p:A,d(o){o&&F(t)}}}function qe(e){let t,l;return{c(){t=b("audio"),je(t.src,l=e[7])||_(t,"src",l),t.controls=!0},m(n,o){q(n,t,o)},p(n,o){o[0]&128&&!je(t.src,l=n[7])&&_(t,"src",l)},d(n){n&&F(t)}}}function at(e){let t,l,n,o,s,a,f,p,u,h,d,m,D,$,O,M,ne,C,oe,G,T,se,U,ce,z,H,ae,P,fe,g,w=e[0]?"Generating...":"Submit",B,I,Re,re,pe,Se,L=e[5]==="upload"&&$e(e),j=e[5]==="record"&&Fe(e),V=X(e[12]),k=[];for(let r=0;r<V.length;r+=1)k[r]=De(Ne(e,V,r));let Y=X(e[12]),y=[];for(let r=0;r<Y.length;r+=1)y[r]=Te(Pe(e,Y,r));let Z=X(e[11]),R=[];for(let r=0;r<Z.length;r+=1)R[r]=Be(Ue(e,Z,r));let E=e[7]&&qe(e);return{c(){t=b("div"),l=b("h1"),l.textContent="Audio Translation App",n=S(),o=b("div"),s=b("button"),a=N("Record Audio"),p=S(),u=b("button"),h=N("Upload Audio"),m=S(),L&&L.c(),D=S(),j&&j.c(),$=S(),O=b("div"),M=b("label"),M.textContent="Input Language:",ne=S(),C=b("select");for(let r=0;r<k.length;r+=1)k[r].c();oe=S(),G=b("div"),T=b("label"),T.textContent="Output Language:",se=S(),U=b("select");for(let r=0;r<y.length;r+=1)y[r].c();ce=S(),z=b("div"),H=b("label"),H.textContent="Voice:",ae=S(),P=b("select");for(let r=0;r<R.length;r+=1)R[r].c();fe=S(),g=b("button"),B=N(w),Re=S(),re=b("div"),E&&E.c(),_(l,"class","svelte-jwb99f"),_(s,"class",f=be(e[5]==="record"?"active":"")+" svelte-jwb99f"),_(u,"class",d=be(e[5]==="upload"?"active":"")+" svelte-jwb99f"),_(o,"class","mode-selector svelte-jwb99f"),_(M,"for","inputLanguage"),_(C,"class","svelte-jwb99f"),e[2]===void 0&&le(()=>e[20].call(C)),_(T,"for","outputLanguage"),_(U,"class","svelte-jwb99f"),e[3]===void 0&&le(()=>e[21].call(U)),_(H,"for","voice"),_(P,"class","svelte-jwb99f"),e[8]===void 0&&le(()=>e[22].call(P)),g.disabled=I=e[0]||e[4],_(g,"class","svelte-jwb99f"),_(re,"class","audio-player svelte-jwb99f"),_(t,"class","container svelte-jwb99f")},m(r,v){q(r,t,v),c(t,l),c(t,n),c(t,o),c(o,s),c(s,a),c(o,p),c(o,u),c(u,h),c(t,m),L&&L.m(t,null),c(t,D),j&&j.m(t,null),c(t,$),c(t,O),c(O,M),c(O,ne),c(O,C);for(let i=0;i<k.length;i+=1)k[i]&&k[i].m(C,null);Q(C,e[2],!0),c(t,oe),c(t,G),c(G,T),c(G,se),c(G,U);for(let i=0;i<y.length;i+=1)y[i]&&y[i].m(U,null);Q(U,e[3],!0),c(t,ce),c(t,z),c(z,H),c(z,ae),c(z,P);for(let i=0;i<R.length;i+=1)R[i]&&R[i].m(P,null);Q(P,e[8],!0),c(t,fe),c(t,g),c(g,B),c(t,Re),c(t,re),E&&E.m(re,null),pe||(Se=[K(s,"click",e[16]),K(u,"click",e[17]),K(C,"change",e[20]),K(U,"change",e[21]),K(P,"change",e[22]),K(g,"click",e[15])],pe=!0)},p(r,v){if(v[0]&32&&f!==(f=be(r[5]==="record"?"active":"")+" svelte-jwb99f")&&_(s,"class",f),v[0]&32&&d!==(d=be(r[5]==="upload"?"active":"")+" svelte-jwb99f")&&_(u,"class",d),r[5]==="upload"?L?L.p(r,v):(L=$e(r),L.c(),L.m(t,D)):L&&(L.d(1),L=null),r[5]==="record"?j?j.p(r,v):(j=Fe(r),j.c(),j.m(t,$)):j&&(j.d(1),j=null),v[0]&4096){V=X(r[12]);let i;for(i=0;i<V.length;i+=1){const J=Ne(r,V,i);k[i]?k[i].p(J,v):(k[i]=De(J),k[i].c(),k[i].m(C,null))}for(;i<k.length;i+=1)k[i].d(1);k.length=V.length}if(v[0]&4100&&Q(C,r[2]),v[0]&4096){Y=X(r[12]);let i;for(i=0;i<Y.length;i+=1){const J=Pe(r,Y,i);y[i]?y[i].p(J,v):(y[i]=Te(J),y[i].c(),y[i].m(U,null))}for(;i<y.length;i+=1)y[i].d(1);y.length=Y.length}if(v[0]&4104&&Q(U,r[3]),v[0]&2048){Z=X(r[11]);let i;for(i=0;i<Z.length;i+=1){const J=Ue(r,Z,i);R[i]?R[i].p(J,v):(R[i]=Be(J),R[i].c(),R[i].m(P,null))}for(;i<R.length;i+=1)R[i].d(1);R.length=Z.length}v[0]&2304&&Q(P,r[8]),v[0]&1&&w!==(w=r[0]?"Generating...":"Submit")&&we(B,w),v[0]&17&&I!==(I=r[0]||r[4])&&(g.disabled=I),r[7]?E?E.p(r,v):(E=qe(r),E.c(),E.m(re,null)):E&&(E.d(1),E=null)},i:A,o:A,d(r){r&&F(t),L&&L.d(),j&&j.d(),_e(k,r),_e(y,r),_e(R,r),E&&E.d(),pe=!1,ue(Se)}}}let ft="https://api.thevoicetranslator.com/process-audio";function dt(e,t,l){let n,o,s=!1,a,f="en-US",p="es",u="",h=Oe("");Ee(e,h,g=>l(7,o=g));let d=!1,m,D,$="record",O=Oe(15);Ee(e,O,g=>l(6,n=g));let M;const ne=[{label:"Juyoung"},{label:"Boyeon"},{label:"Jessica"},{label:"Aditi"},{label:"Nimal"},{label:"Jane"}],C=[{label:"Chinese",value:"zh-CN"},{label:"Korean",value:"ko-KR"},{label:"Dutch",value:"nl-NL"},{label:"Turkish",value:"tr-TR"},{label:"Swedish",value:"sv-SE"},{label:"Indonesian",value:"id-ID"},{label:"Filipino",value:"fil-PH"},{label:"Japanese",value:"ja-JP"},{label:"Ukrainian",value:"uk-UA"},{label:"Greek",value:"el-GR"},{label:"Czech",value:"cs-CZ"},{label:"Finnish",value:"fi-FI"},{label:"Romanian",value:"ro-RO"},{label:"Russian",value:"ru-RU"},{label:"Danish",value:"da-DK"},{label:"Bulgarian",value:"bg-BG"},{label:"Malay",value:"ms-MY"},{label:"Slovak",value:"sk-SK"},{label:"Croatian",value:"hr-HR"},{label:"Classic Arabic",value:"ar-SA"},{label:"Tamil",value:"ta-IN"},{label:"English",value:"en-US"},{label:"Polish",value:"pl-PL"},{label:"German",value:"de-DE"},{label:"Spanish",value:"es-ES"},{label:"French",value:"fr-FR"},{label:"Italian",value:"it-IT"},{label:"Hindi",value:"hi-IN"},{label:"Portuguese",value:"pt-BR"}];let oe;async function G(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const g=await navigator.mediaDevices.getUserMedia({audio:!0}),w=new MediaRecorder(g);m=w,w.start();const B=[];w.addEventListener("dataavailable",I=>{B.push(I.data)}),w.addEventListener("stop",()=>{const I=new Blob(B.slice(0,15));URL.createObjectURL(I),D=new File([I],"recordedAudio.wav",{type:"audio/wav"}),l(1,a=D)}),l(4,d=!0),O.set(15),M=setInterval(()=>{O.update(I=>I===0?(clearInterval(M),T(),0):I-1)},1e3),oe=setTimeout(T,15e3)}else console.error("Recording not supported")}function T(){m&&(m.stop(),clearTimeout(oe),clearInterval(M),l(4,d=!1),O.set(15))}async function se(){l(0,s=!0),console.log("Submitting form..."),console.log(`Input Language: ${f}, Output Language: ${p}`);const g=new FormData;g.append("audio",a),g.append("input_lang",f),g.append("output_lang",p.substring(0,2)),g.append("voice",u),console.log("Sending request to server...");try{const w=await fetch(ft,{method:"POST",body:g});if(w.ok){console.log("Received response from server");const B=await w.blob();console.log("Received blob:",B),h.set(URL.createObjectURL(B))}else console.error("Server error:",w)}catch(w){console.error("Error sending request to server:",w)}l(0,s=!1)}const U=()=>l(5,$="record"),ce=()=>l(5,$="upload"),z=g=>{l(1,a=g.target.files[0]),console.log("Audio file selected:",a.name)},H=()=>d?T():G();function ae(){f=ge(this),l(2,f),l(12,C)}function P(){p=ge(this),l(3,p),l(12,C)}function fe(){u=ge(this),l(8,u),l(11,ne)}return[s,a,f,p,d,$,n,o,u,h,O,ne,C,G,T,se,U,ce,z,H,ae,P,fe]}class bt extends it{constructor(t){super(),rt(this,t,dt,at,Je,{},null,[-1,-1])}}new bt({target:document.getElementById("app")});
